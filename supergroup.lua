



<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1" media="(device-height: 568px)">
  <meta http-equiv="Content-Language" content="en">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">
  <meta name="theme-color" content="#f5f5f5">

      <meta name="google-analytics" content="UA-3769691-2">

<meta content="collector.githubapp.com" name="octolytics-host" /><meta content="github" name="octolytics-app-id" /><meta content="5D73D88B:8500:41DF6F0:575584AD" name="octolytics-dimension-request_id" />
<meta content="mobile" name="octolytics-dimension-device" />
<meta content="16587458" name="octolytics-dimension-user_id" /><meta content="hafez16" name="octolytics-dimension-user_login" /><meta content="59955952" name="octolytics-dimension-repository_id" /><meta content="hafez16/mega-shield" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="59955952" name="octolytics-dimension-repository_network_root_id" /><meta content="hafez16/mega-shield" name="octolytics-dimension-repository_network_root_nwo" />

<meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location" />



  <meta class="js-ga-set" name="dimension1" content="Logged Out">
    <meta class="js-ga-set" name="dimension3" content="mobile">




  <title>GitHub · Where software is built</title>

  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/mobile-ddf4bab27db0d3265514ed43ae9e6d6a17e320dcb5de83867f3c0f1cb0551811.css" integrity="sha256-3fS6sn2w0yZVFO1Drp5tahfjINy13oOGfzwPHLBVGBE=" media="all" rel="stylesheet" />
</head>
<body class="">
  <header class="nav-bar">
    <div class="nav-bar-inner ">
      <button class="header-button header-nav-button touchable js-show-global-nav" data-ga-click="Mobile, tap, location:header; text:Hamburger">
        <svg aria-hidden="true" class="octicon octicon-three-bars" height="24" version="1.1" viewBox="0 0 12 16" width="18"><path d="M11.41 9H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1z m0-4H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1zM0.59 11h10.81c0.59 0 0.59 0.41 0.59 1s0 1-0.59 1H0.59c-0.59 0-0.59-0.41-0.59-1s0-1 0.59-1z"></path></svg>
      </button>

      <div class="nav-bar-title-text">
              <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path d="M4 9h-1v-1h1v1z m0-3h-1v1h1v-1z m0-2h-1v1h1v-1z m0-2h-1v1h1v-1z m8-1v12c0 0.55-0.45 1-1 1H6v2l-1.5-1.5-1.5 1.5V14H1c-0.55 0-1-0.45-1-1V1C0 0.45 0.45 0 1 0h10c0.55 0 1 0.45 1 1z m-1 10H1v2h2v-1h3v1h5V11z m0-10H2v9h9V1z"></path></svg>

    <strong><a href="/hafez16">hafez16</a></strong>
    /
    <strong><a href="/hafez16/mega-shield">mega-shield</a></strong>

      </div>

      

    </div>


    <nav class="nav-bar-tabs repo-nav-bar-tabs">
      <ul>
          <li>
            <a href="/explore" data-ga-click="Mobile, tap, location:header; text:Explore">
              <svg aria-hidden="true" class="octicon octicon-telescope" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M8 9l3 6h-1L8 11v5h-1V10L5 15h-1l2-5 2-1zM7 0h-1v1h1V0zM5 3h-1v1h1v-1zM2 1H1v1h1V1zM0.63 9c-0.22 0.16-0.28 0.44-0.16 0.67l0.55 0.92c0.13 0.23 0.41 0.31 0.64 0.2l1.39-0.66-1.16-2-1.27 0.86z m7.89-5.39L2.72 7.56l1.23 2.14 6.33-3.03-1.77-3.06z m4.22 1.28l-1.47-2.52c-0.14-0.25-0.47-0.33-0.72-0.17l-1.2 0.83 1.84 3.2 1.33-0.64c0.27-0.13 0.36-0.44 0.22-0.7z"></path></svg>
              Explore
            </a>
          </li>
        <li>
            <a href="/login?return_to=%2Fhafez16%2Fmega-shield%2Fblob%2Fsupergroups%2Fplugins%2Fsupergroup.lua" data-ga-click="Mobile, tap, location:header; text:Sign in">
              <svg aria-hidden="true" class="octicon octicon-sign-in" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M6 6.75v5.25h4V8h1v4c0 0.55-0.45 1-1 1H6v3L0.55 13.28c-0.33-0.17-0.55-0.52-0.55-0.91V1C0 0.45 0.45 0 1 0h9c0.55 0 1 0.45 1 1v3h-1V1H2l4 2v2.25l3-2.25v2h4v2H9v2L6 6.75z"></path></svg>
              Sign in
            </a>
        </li>
            <li class="section-title">This repository</li>
    <li><a href="/hafez16/mega-shield?files=1"><svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M9.5 3l-1.5 1.5 3.5 3.5L8 11.5l1.5 1.5 4.5-5L9.5 3zM4.5 3L0 8l4.5 5 1.5-1.5L2.5 8l3.5-3.5L4.5 3z"></path></svg> Code</a></li>
      <li><a href="/hafez16/mega-shield/issues"><svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7S10.14 13.7 7 13.7 1.3 11.14 1.3 8s2.56-5.7 5.7-5.7m0-1.3C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7S10.86 1 7 1z m1 3H6v5h2V4z m0 6H6v2h2V10z"></path></svg> Issues</a></li>
    <li><a href="/hafez16/mega-shield/pulls"><svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path d="M11 11.28c0-1.73 0-6.28 0-6.28-0.03-0.78-0.34-1.47-0.94-2.06s-1.28-0.91-2.06-0.94c0 0-1.02 0-1 0V0L4 3l3 3V4h1c0.27 0.02 0.48 0.11 0.69 0.31s0.3 0.42 0.31 0.69v6.28c-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72z m-1 2.92c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2zM4 3c0-1.11-0.89-2-2-2S0 1.89 0 3c0 0.73 0.41 1.38 1 1.72 0 1.55 0 5.56 0 6.56-0.59 0.34-1 0.98-1 1.72 0 1.11 0.89 2 2 2s2-0.89 2-2c0-0.73-0.41-1.38-1-1.72V4.72c0.59-0.34 1-0.98 1-1.72z m-0.8 10c0 0.66-0.55 1.2-1.2 1.2s-1.2-0.55-1.2-1.2 0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2z m-1.2-8.8c-0.66 0-1.2-0.55-1.2-1.2s0.55-1.2 1.2-1.2 1.2 0.55 1.2 1.2-0.55 1.2-1.2 1.2z"></path></svg> Pull Requests</a></li>
    <li><a href="/hafez16/mega-shield/pulse"><svg aria-hidden="true" class="octicon octicon-pulse" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M11.5 8L8.8 5.4 6.6 8.5 5.5 1.6 2.38 8H0V10h3.6L4.5 8.2l0.9 5.4L9 8.5l1.6 1.5H14V8H11.5z"></path></svg> Pulse</a></li>

      </ul>
    </nav>
  </header>


  <div id="js-flash-container">
</div>


        

<div class="breadcrumb blob-breadcrumb">
  <label for="blob-history-checkbox" class="blob-history-label">
    <svg aria-hidden="true" class="octicon octicon-history" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path d="M8 13H6V6h5v2H8v5zM7 1c-2.19 0-4.13 1.02-5.41 2.59L0 2v4h4l-1.5-1.5c1.05-1.33 2.67-2.2 4.5-2.2 3.14 0 5.7 2.56 5.7 5.7S10.14 13.7 7 13.7 1.3 11.14 1.3 8c0-0.34 0.03-0.67 0.09-1H0.08c-0.05 0.33-0.08 0.66-0.08 1 0 3.86 3.14 7 7 7s7-3.14 7-7S10.86 1 7 1z"></path></svg>
  </label>
  <span class="filetype-icon"><svg aria-hidden="true" class="octicon octicon-file-text" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path></svg></span>
  <span class="js-path-segment"><a href="/hafez16/mega-shield/tree/supergroups/plugins"><span>plugins</span></a></span><span class="separator">/</span><strong class="final-path">supergroup.lua</strong>
</div>

<input id="blob-history-checkbox"
       class="js-blob-history-checkbox blob-history-checkbox"
       type="checkbox"
       data-url="/hafez16/mega-shield/latest_commit/supergroups/plugins/supergroup.lua">

<div class="blob-history">
  <a href="/hafez16/mega-shield/commits/supergroups/plugins/supergroup.lua" class="js-blob-history-link">
    Loading latest commit…
</a></div>

  <div class="blob-file-content js-file-line-container">
    <div class="highlighted-blob tab-size" data-tab-size="8"><div class="code-body highlight"><pre><div class='line js-file-line' id='LC1'><span class="pl-c">--Begin supergrpup.lua</span></div><div class='line js-file-line' id='LC2'><span class="pl-c">--Check members #Add supergroup</span></div><div class='line js-file-line' id='LC3'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">check_member_super</span>(<span class="pl-smi">cb_extra, success, result</span>)</div><div class='line js-file-line' id='LC4'>&nbsp;&nbsp;<span class="pl-k">local</span> receiver <span class="pl-k">=</span> cb_extra.<span class="pl-smi">receiver</span></div><div class='line js-file-line' id='LC5'>&nbsp;&nbsp;<span class="pl-k">local</span> data <span class="pl-k">=</span> cb_extra.<span class="pl-smi">data</span></div><div class='line js-file-line' id='LC6'>&nbsp;&nbsp;<span class="pl-k">local</span> msg <span class="pl-k">=</span> cb_extra.<span class="pl-smi">msg</span></div><div class='line js-file-line' id='LC7'>&nbsp;&nbsp;<span class="pl-k">if</span> success <span class="pl-k">==</span> <span class="pl-c1">0</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC8'>	<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&quot;</span>Promote me to admin first!<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC9'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC10'>&nbsp;&nbsp;<span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(result) <span class="pl-k">do</span></div><div class='line js-file-line' id='LC11'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> member_id <span class="pl-k">=</span> v.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC12'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> member_id <span class="pl-k">~=</span> our_id <span class="pl-k">then</span></div><div class='line js-file-line' id='LC13'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c">-- SuperGroup configuration</span></div><div class='line js-file-line' id='LC14'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)] <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC15'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;group_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC16'>		long_id <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span>,</div><div class='line js-file-line' id='LC17'>		moderators <span class="pl-k">=</span> {},</div><div class='line js-file-line' id='LC18'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_owner <span class="pl-k">=</span> member_id ,</div><div class='line js-file-line' id='LC19'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;settings <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC20'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set_name <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">title</span>, <span class="pl-s"><span class="pl-pds">&#39;</span>_<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span> <span class="pl-pds">&#39;</span></span>),</div><div class='line js-file-line' id='LC21'>		  lock_arabic <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC22'>		  lock_link <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>no<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC23'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flood <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC24'>		  lock_spam <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC25'>		  lock_sticker <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC26'>		  member <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC27'>		  public <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC28'>		  lock_rtl <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC29'>		  lock_tgservice <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC30'>		  lock_contacts <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC31'>		  strict <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC32'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class='line js-file-line' id='LC33'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div class='line js-file-line' id='LC34'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC35'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> groups <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>groups<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC36'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(groups)] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC37'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(groups)] <span class="pl-k">=</span> {}</div><div class='line js-file-line' id='LC38'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC39'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC40'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(groups)][<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)] <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC41'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC42'>	  <span class="pl-k">local</span> text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup has been added!<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC43'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">reply_msg</span>(msg.<span class="pl-smi">id</span>, text, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC44'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC45'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC46'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC47'><br></div><div class='line js-file-line' id='LC48'><span class="pl-c">--Check Members #rem supergroup</span></div><div class='line js-file-line' id='LC49'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">check_member_superrem</span>(<span class="pl-smi">cb_extra, success, result</span>)</div><div class='line js-file-line' id='LC50'>&nbsp;&nbsp;<span class="pl-k">local</span> receiver <span class="pl-k">=</span> cb_extra.<span class="pl-smi">receiver</span></div><div class='line js-file-line' id='LC51'>&nbsp;&nbsp;<span class="pl-k">local</span> data <span class="pl-k">=</span> cb_extra.<span class="pl-smi">data</span></div><div class='line js-file-line' id='LC52'>&nbsp;&nbsp;<span class="pl-k">local</span> msg <span class="pl-k">=</span> cb_extra.<span class="pl-smi">msg</span></div><div class='line js-file-line' id='LC53'>&nbsp;&nbsp;<span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(result) <span class="pl-k">do</span></div><div class='line js-file-line' id='LC54'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> member_id <span class="pl-k">=</span> v.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC55'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> member_id <span class="pl-k">~=</span> our_id <span class="pl-k">then</span></div><div class='line js-file-line' id='LC56'>	  <span class="pl-c">-- Group configuration removal</span></div><div class='line js-file-line' id='LC57'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)] <span class="pl-k">=</span> <span class="pl-c1">nil</span></div><div class='line js-file-line' id='LC58'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC59'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> groups <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>groups<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC60'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(groups)] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC61'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(groups)] <span class="pl-k">=</span> <span class="pl-c1">nil</span></div><div class='line js-file-line' id='LC62'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC63'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC64'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(groups)][<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)] <span class="pl-k">=</span> <span class="pl-c1">nil</span></div><div class='line js-file-line' id='LC65'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC66'>	  <span class="pl-k">local</span> text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup has been removed<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC67'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">reply_msg</span>(msg.<span class="pl-smi">id</span>, text, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC68'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC69'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC70'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC71'><br></div><div class='line js-file-line' id='LC72'><span class="pl-c">--Function to Add supergroup</span></div><div class='line js-file-line' id='LC73'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">superadd</span>(<span class="pl-smi">msg</span>)</div><div class='line js-file-line' id='LC74'>	<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC75'>	<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC76'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">channel_get_users</span>(receiver, check_member_super,{receiver <span class="pl-k">=</span> receiver, data <span class="pl-k">=</span> data, msg <span class="pl-k">=</span> msg})</div><div class='line js-file-line' id='LC77'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC78'><br></div><div class='line js-file-line' id='LC79'><span class="pl-c">--Function to remove supergroup</span></div><div class='line js-file-line' id='LC80'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">superrem</span>(<span class="pl-smi">msg</span>)</div><div class='line js-file-line' id='LC81'>	<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC82'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC83'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">channel_get_users</span>(receiver, check_member_superrem,{receiver <span class="pl-k">=</span> receiver, data <span class="pl-k">=</span> data, msg <span class="pl-k">=</span> msg})</div><div class='line js-file-line' id='LC84'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC85'><br></div><div class='line js-file-line' id='LC86'><span class="pl-c">--Get and output admins and bots in supergroup</span></div><div class='line js-file-line' id='LC87'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">callback</span>(<span class="pl-smi">cb_extra, success, result</span>)</div><div class='line js-file-line' id='LC88'><span class="pl-k">local</span> i <span class="pl-k">=</span> <span class="pl-c1">1</span></div><div class='line js-file-line' id='LC89'><span class="pl-k">local</span> chat_name <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(cb_extra.<span class="pl-smi">msg</span>.<span class="pl-smi">to</span>.<span class="pl-smi">print_name</span>, <span class="pl-s"><span class="pl-pds">&quot;</span>_<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC90'><span class="pl-k">local</span> member_type <span class="pl-k">=</span> cb_extra.<span class="pl-smi">member_type</span></div><div class='line js-file-line' id='LC91'><span class="pl-k">local</span> text <span class="pl-k">=</span> member_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> for <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>chat_name<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>:<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC92'><span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairsByKeys</span>(result) <span class="pl-k">do</span></div><div class='line js-file-line' id='LC93'><span class="pl-k">if</span> <span class="pl-k">not</span> v.<span class="pl-smi">first_name</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC94'>	name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC95'><span class="pl-k">else</span></div><div class='line js-file-line' id='LC96'>	vname <span class="pl-k">=</span> v.<span class="pl-smi">first_name</span>:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>‮<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC97'>	name <span class="pl-k">=</span> vname:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>_<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC98'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC99'>		text <span class="pl-k">=</span> text<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>i<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> - <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>name<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>[<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>]<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC100'>		i <span class="pl-k">=</span> i <span class="pl-k">+</span> <span class="pl-c1">1</span></div><div class='line js-file-line' id='LC101'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC102'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">send_large_msg</span>(cb_extra.<span class="pl-smi">receiver</span>, text)</div><div class='line js-file-line' id='LC103'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC104'><br></div><div class='line js-file-line' id='LC105'><span class="pl-c">--Get and output info about supergroup</span></div><div class='line js-file-line' id='LC106'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">callback_info</span>(<span class="pl-smi">cb_extra, success, result</span>)</div><div class='line js-file-line' id='LC107'><span class="pl-k">local</span> title <span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">&quot;</span>Info for SuperGroup: [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">title</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>]<span class="pl-cce">\n\n</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC108'><span class="pl-k">local</span> admin_num <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Admin count: <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">admins_count</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC109'><span class="pl-k">local</span> user_num <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>User count: <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">participants_count</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC110'><span class="pl-k">local</span> kicked_num <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Kicked user count: <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">kicked_count</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC111'><span class="pl-k">local</span> channel_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>ID: <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC112'><span class="pl-k">if</span> result.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC113'>	channel_username <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Username: @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC114'><span class="pl-k">else</span></div><div class='line js-file-line' id='LC115'>	channel_username <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC116'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC117'><span class="pl-k">local</span> text <span class="pl-k">=</span> title<span class="pl-k">..</span>admin_num<span class="pl-k">..</span>user_num<span class="pl-k">..</span>kicked_num<span class="pl-k">..</span>channel_id<span class="pl-k">..</span>channel_username</div><div class='line js-file-line' id='LC118'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">send_large_msg</span>(cb_extra.<span class="pl-smi">receiver</span>, text)</div><div class='line js-file-line' id='LC119'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC120'><br></div><div class='line js-file-line' id='LC121'><span class="pl-c">--Get and output members of supergroup</span></div><div class='line js-file-line' id='LC122'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">callback_who</span>(<span class="pl-smi">cb_extra, success, result</span>)</div><div class='line js-file-line' id='LC123'><span class="pl-k">local</span> text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Members for <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>cb_extra.<span class="pl-smi">receiver</span></div><div class='line js-file-line' id='LC124'><span class="pl-k">local</span> i <span class="pl-k">=</span> <span class="pl-c1">1</span></div><div class='line js-file-line' id='LC125'><span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairsByKeys</span>(result) <span class="pl-k">do</span></div><div class='line js-file-line' id='LC126'><span class="pl-k">if</span> <span class="pl-k">not</span> v.<span class="pl-smi">print_name</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC127'>	name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC128'><span class="pl-k">else</span></div><div class='line js-file-line' id='LC129'>	vname <span class="pl-k">=</span> v.<span class="pl-smi">print_name</span>:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>‮<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC130'>	name <span class="pl-k">=</span> vname:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>_<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC131'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC132'>	<span class="pl-k">if</span> v.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC133'>		username <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span> @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC134'>	<span class="pl-k">else</span></div><div class='line js-file-line' id='LC135'>		username <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC136'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC137'>	text <span class="pl-k">=</span> text<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>i<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> - <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>name<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>username<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [ <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> ]<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC138'>	<span class="pl-c">--text = text..&quot;\n&quot;..username</span></div><div class='line js-file-line' id='LC139'>	i <span class="pl-k">=</span> i <span class="pl-k">+</span> <span class="pl-c1">1</span></div><div class='line js-file-line' id='LC140'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC141'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> file <span class="pl-k">=</span> <span class="pl-c1">io.open</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>./groups/lists/supergroups/<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>cb_extra.<span class="pl-smi">receiver</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>.txt<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span>w<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC142'>&nbsp;&nbsp;&nbsp;&nbsp;file:<span class="pl-c1">write</span>(text)</div><div class='line js-file-line' id='LC143'>&nbsp;&nbsp;&nbsp;&nbsp;file:<span class="pl-c1">flush</span>()</div><div class='line js-file-line' id='LC144'>&nbsp;&nbsp;&nbsp;&nbsp;file:<span class="pl-c1">close</span>()</div><div class='line js-file-line' id='LC145'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">send_document</span>(cb_extra.<span class="pl-smi">receiver</span>,<span class="pl-s"><span class="pl-pds">&quot;</span>./groups/lists/supergroups/<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>cb_extra.<span class="pl-smi">receiver</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>.txt<span class="pl-pds">&quot;</span></span>, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC146'>	<span class="pl-c1">post_msg</span>(cb_extra.<span class="pl-smi">receiver</span>, text, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC147'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC148'><br></div><div class='line js-file-line' id='LC149'><span class="pl-c">--Get and output list of kicked users for supergroup</span></div><div class='line js-file-line' id='LC150'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">callback_kicked</span>(<span class="pl-smi">cb_extra, success, result</span>)</div><div class='line js-file-line' id='LC151'><span class="pl-c">--vardump(result)</span></div><div class='line js-file-line' id='LC152'><span class="pl-k">local</span> text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Kicked Members for SuperGroup <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>cb_extra.<span class="pl-smi">receiver</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-cce">\n\n</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC153'><span class="pl-k">local</span> i <span class="pl-k">=</span> <span class="pl-c1">1</span></div><div class='line js-file-line' id='LC154'><span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairsByKeys</span>(result) <span class="pl-k">do</span></div><div class='line js-file-line' id='LC155'><span class="pl-k">if</span> <span class="pl-k">not</span> v.<span class="pl-smi">print_name</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC156'>	name <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC157'><span class="pl-k">else</span></div><div class='line js-file-line' id='LC158'>	vname <span class="pl-k">=</span> v.<span class="pl-smi">print_name</span>:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>‮<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC159'>	name <span class="pl-k">=</span> vname:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>_<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC160'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC161'>	<span class="pl-k">if</span> v.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC162'>		name <span class="pl-k">=</span> name<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC163'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC164'>	text <span class="pl-k">=</span> text<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>i<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> - <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>name<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [ <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> ]<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC165'>	i <span class="pl-k">=</span> i <span class="pl-k">+</span> <span class="pl-c1">1</span></div><div class='line js-file-line' id='LC166'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC167'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> file <span class="pl-k">=</span> <span class="pl-c1">io.open</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>./groups/lists/supergroups/kicked/<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>cb_extra.<span class="pl-smi">receiver</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>.txt<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span>w<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC168'>&nbsp;&nbsp;&nbsp;&nbsp;file:<span class="pl-c1">write</span>(text)</div><div class='line js-file-line' id='LC169'>&nbsp;&nbsp;&nbsp;&nbsp;file:<span class="pl-c1">flush</span>()</div><div class='line js-file-line' id='LC170'>&nbsp;&nbsp;&nbsp;&nbsp;file:<span class="pl-c1">close</span>()</div><div class='line js-file-line' id='LC171'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">send_document</span>(cb_extra.<span class="pl-smi">receiver</span>,<span class="pl-s"><span class="pl-pds">&quot;</span>./groups/lists/supergroups/kicked/<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>cb_extra.<span class="pl-smi">receiver</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>.txt<span class="pl-pds">&quot;</span></span>, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC172'>	<span class="pl-c">--send_large_msg(cb_extra.receiver, text)</span></div><div class='line js-file-line' id='LC173'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC174'><br></div><div class='line js-file-line' id='LC175'><span class="pl-c">--Begin supergroup locks</span></div><div class='line js-file-line' id='LC176'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_links</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC177'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC178'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC179'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC180'>&nbsp;&nbsp;<span class="pl-k">local</span> group_link_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_link<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC181'>&nbsp;&nbsp;<span class="pl-k">if</span> group_link_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC182'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Link posting is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC183'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC184'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_link<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC185'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC186'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Link posting has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC187'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC188'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC189'><br></div><div class='line js-file-line' id='LC190'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_links</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC191'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC192'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC193'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC194'>&nbsp;&nbsp;<span class="pl-k">local</span> group_link_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_link<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC195'>&nbsp;&nbsp;<span class="pl-k">if</span> group_link_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC196'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Link posting is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC197'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC198'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_link<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC199'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC200'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Link posting has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC201'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC202'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC203'><br></div><div class='line js-file-line' id='LC204'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_all</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC205'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC206'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC207'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC208'>&nbsp;&nbsp;<span class="pl-k">local</span> group_all_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>all<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC209'>&nbsp;&nbsp;<span class="pl-k">if</span> group_all_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC210'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>all setting is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC211'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC212'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>all<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC213'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC214'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>all setting has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC215'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC216'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC217'><br></div><div class='line js-file-line' id='LC218'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_all</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC219'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC220'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC221'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC222'>&nbsp;&nbsp;<span class="pl-k">local</span> group_all_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>all<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC223'>&nbsp;&nbsp;<span class="pl-k">if</span> group_all_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC224'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>all setting is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC225'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC226'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>all<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC227'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC228'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>all setting has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC229'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC230'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC231'><br></div><div class='line js-file-line' id='LC232'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_etehad</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC233'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC234'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC235'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC236'>&nbsp;&nbsp;<span class="pl-k">local</span> group_etehad_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>etehad<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC237'>&nbsp;&nbsp;<span class="pl-k">if</span> group_etehad_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC238'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>etehad setting is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC239'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC240'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>etehad<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC241'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC242'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>etehad setting has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC243'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC244'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC245'><br></div><div class='line js-file-line' id='LC246'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_etehad</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC247'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC248'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC249'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC250'>&nbsp;&nbsp;<span class="pl-k">local</span> group_etehad_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>etehad<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC251'>&nbsp;&nbsp;<span class="pl-k">if</span> group_etehad_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC252'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>etehad setting is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC253'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC254'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>etehad<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC255'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC256'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>etehad setting has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC257'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC258'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC259'><br></div><div class='line js-file-line' id='LC260'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_leave</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC261'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC262'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC263'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC264'>&nbsp;&nbsp;<span class="pl-k">local</span> group_leave_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>leave<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC265'>&nbsp;&nbsp;<span class="pl-k">if</span> group_leave_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC266'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>leave is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC267'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC268'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>leave<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC269'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC270'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>leave has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC271'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC272'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC273'><br></div><div class='line js-file-line' id='LC274'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_leave</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC275'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC276'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC277'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC278'>&nbsp;&nbsp;<span class="pl-k">local</span> group_leave_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>leave<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC279'>&nbsp;&nbsp;<span class="pl-k">if</span> group_leave_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC280'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>leave is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC281'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC282'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>leave<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC283'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC284'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>leave has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC285'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC286'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC287'><br></div><div class='line js-file-line' id='LC288'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_operator</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC289'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC290'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC291'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC292'>&nbsp;&nbsp;<span class="pl-k">local</span> group_operator_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>operator<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC293'>&nbsp;&nbsp;<span class="pl-k">if</span> group_operator_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC294'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>operator is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC295'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC296'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>operator<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC297'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC298'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>operator has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC299'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC300'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC301'><br></div><div class='line js-file-line' id='LC302'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_operator</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC303'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC304'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC305'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC306'>&nbsp;&nbsp;<span class="pl-k">local</span> group_operator_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>operator<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC307'>&nbsp;&nbsp;<span class="pl-k">if</span> group_operator_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC308'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>operator is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC309'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC310'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>operator<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC311'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC312'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>operator has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC313'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC314'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC315'><br></div><div class='line js-file-line' id='LC316'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_reply</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC317'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC318'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC319'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC320'>&nbsp;&nbsp;<span class="pl-k">local</span> group_reply_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>reply<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC321'>&nbsp;&nbsp;<span class="pl-k">if</span> group_reply_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC322'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>reply is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC323'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC324'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>reply<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC325'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC326'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>reply has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC327'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC328'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC329'><br></div><div class='line js-file-line' id='LC330'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_reply</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC331'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC332'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC333'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC334'>&nbsp;&nbsp;<span class="pl-k">local</span> group_reply_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>reply<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC335'>&nbsp;&nbsp;<span class="pl-k">if</span> group_reply_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC336'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>reply is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC337'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC338'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>reply<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC339'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC340'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>reply has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC341'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC342'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC343'><br></div><div class='line js-file-line' id='LC344'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_username</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC345'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC346'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC347'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC348'>&nbsp;&nbsp;<span class="pl-k">local</span> group_username_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>username<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC349'>&nbsp;&nbsp;<span class="pl-k">if</span> group_username_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC350'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>username is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC351'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC352'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>username<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC353'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC354'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>username has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC355'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC356'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC357'><br></div><div class='line js-file-line' id='LC358'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_username</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC359'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC360'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC361'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC362'>&nbsp;&nbsp;<span class="pl-k">local</span> group_username_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>username<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC363'>&nbsp;&nbsp;<span class="pl-k">if</span> group_username_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC364'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>username is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC365'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC366'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>username<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC367'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC368'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>username has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC369'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC370'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC371'><br></div><div class='line js-file-line' id='LC372'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_media</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC373'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC374'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC375'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC376'>&nbsp;&nbsp;<span class="pl-k">local</span> group_media_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>media<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC377'>&nbsp;&nbsp;<span class="pl-k">if</span> group_media_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC378'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>media is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC379'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC380'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>media<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC381'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC382'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>media has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC383'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC384'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC385'><br></div><div class='line js-file-line' id='LC386'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_media</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC387'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC388'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC389'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC390'>&nbsp;&nbsp;<span class="pl-k">local</span> group_media_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>media<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC391'>&nbsp;&nbsp;<span class="pl-k">if</span> group_media_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC392'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>media is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC393'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC394'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>media<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC395'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC396'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>media has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC397'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC398'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC399'><br></div><div class='line js-file-line' id='LC400'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_fosh</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC401'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC402'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC403'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC404'>&nbsp;&nbsp;<span class="pl-k">local</span> group_fosh_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>fosh<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC405'>&nbsp;&nbsp;<span class="pl-k">if</span> group_fosh_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC406'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>fosh is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC407'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC408'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>fosh<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC409'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC410'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>fosh has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC411'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC412'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC413'><br></div><div class='line js-file-line' id='LC414'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_fosh</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC415'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC416'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC417'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC418'>&nbsp;&nbsp;<span class="pl-k">local</span> group_fosh_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>fosh<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC419'>&nbsp;&nbsp;<span class="pl-k">if</span> group_fosh_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC420'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>fosh is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC421'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC422'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>fosh<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC423'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC424'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>fosh has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC425'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC426'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC427'><br></div><div class='line js-file-line' id='LC428'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_join</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC429'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC430'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC431'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC432'>&nbsp;&nbsp;<span class="pl-k">local</span> group_join_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>join<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC433'>&nbsp;&nbsp;<span class="pl-k">if</span> group_join_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC434'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>join is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC435'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC436'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>join<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC437'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC438'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>join has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC439'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC440'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC441'><br></div><div class='line js-file-line' id='LC442'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_join</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC443'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC444'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC445'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC446'>&nbsp;&nbsp;<span class="pl-k">local</span> group_join_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>join<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC447'>&nbsp;&nbsp;<span class="pl-k">if</span> group_join_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC448'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>join is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC449'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC450'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>join<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC451'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC452'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>join has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC453'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC454'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC455'><br></div><div class='line js-file-line' id='LC456'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_fwd</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC457'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC458'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC459'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC460'>&nbsp;&nbsp;<span class="pl-k">local</span> group_fwd_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>fwd<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC461'>&nbsp;&nbsp;<span class="pl-k">if</span> group_fwd_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC462'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>fwd is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC463'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC464'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>fwd<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC465'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC466'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>fwd has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC467'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC468'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC469'><br></div><div class='line js-file-line' id='LC470'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_fwd</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC471'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC472'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC473'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC474'>&nbsp;&nbsp;<span class="pl-k">local</span> group_fwd_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>fwd<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC475'>&nbsp;&nbsp;<span class="pl-k">if</span> group_fwd_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC476'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>fwd is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC477'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC478'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>fwd<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC479'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC480'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>fwd has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC481'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC482'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC483'><br></div><div class='line js-file-line' id='LC484'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_english</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC485'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC486'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC487'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC488'>&nbsp;&nbsp;<span class="pl-k">local</span> group_english_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>english<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC489'>&nbsp;&nbsp;<span class="pl-k">if</span> group_english_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC490'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>english is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC491'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC492'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>english<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC493'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC494'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>english has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC495'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC496'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC497'><br></div><div class='line js-file-line' id='LC498'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_english</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC499'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC500'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC501'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC502'>&nbsp;&nbsp;<span class="pl-k">local</span> group_english_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>english<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC503'>&nbsp;&nbsp;<span class="pl-k">if</span> group_english_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC504'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>english is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC505'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC506'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>english<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC507'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC508'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>english has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC509'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC510'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC511'><br></div><div class='line js-file-line' id='LC512'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_emoji</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC513'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC514'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC515'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC516'>&nbsp;&nbsp;<span class="pl-k">local</span> group_emoji_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>emoji<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC517'>&nbsp;&nbsp;<span class="pl-k">if</span> group_emoji_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC518'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>emoji is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC519'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC520'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>emoji<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC521'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC522'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>emoji has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC523'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC524'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC525'><br></div><div class='line js-file-line' id='LC526'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_emoji</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC527'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC528'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC529'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC530'>&nbsp;&nbsp;<span class="pl-k">local</span> group_emoji_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>emoji<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC531'>&nbsp;&nbsp;<span class="pl-k">if</span> group_emoji_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC532'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>emoji is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC533'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC534'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>emoji<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC535'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC536'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>emoji has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC537'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC538'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC539'><br></div><div class='line js-file-line' id='LC540'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_tag</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC541'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC542'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC543'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC544'>&nbsp;&nbsp;<span class="pl-k">local</span> group_tag_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>tag<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC545'>&nbsp;&nbsp;<span class="pl-k">if</span> group_tag_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC546'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>tag is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC547'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC548'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>tag<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC549'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC550'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>tag has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC551'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC552'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC553'><br></div><div class='line js-file-line' id='LC554'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_tag</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC555'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC556'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC557'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC558'>&nbsp;&nbsp;<span class="pl-k">local</span> group_tag_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>tag<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC559'>&nbsp;&nbsp;<span class="pl-k">if</span> group_tag_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC560'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>tag is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC561'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC562'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>tag<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC563'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC564'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>tag has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC565'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC566'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC567'><br></div><div class='line js-file-line' id='LC568'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_all</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC569'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC570'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC571'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC572'>&nbsp;&nbsp;<span class="pl-k">local</span> group_all_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>all<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC573'>&nbsp;&nbsp;<span class="pl-k">if</span> group_all_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC574'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>all setting is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC575'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC576'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>all<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC577'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC578'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>all setting has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC579'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC580'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC581'><br></div><div class='line js-file-line' id='LC582'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_spam</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC583'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC584'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC585'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC586'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC587'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Owners only!<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC588'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC589'>&nbsp;&nbsp;<span class="pl-k">local</span> group_spam_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_spam<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC590'>&nbsp;&nbsp;<span class="pl-k">if</span> group_spam_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC591'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup spam is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC592'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC593'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_spam<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC594'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC595'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup spam has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC596'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC597'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC598'><br></div><div class='line js-file-line' id='LC599'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_spam</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC600'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC601'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC602'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC603'>&nbsp;&nbsp;<span class="pl-k">local</span> group_spam_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_spam<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC604'>&nbsp;&nbsp;<span class="pl-k">if</span> group_spam_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC605'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup spam is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC606'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC607'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_spam<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC608'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC609'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup spam has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC610'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC611'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC612'><br></div><div class='line js-file-line' id='LC613'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_flood</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC614'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC615'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC616'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC617'>&nbsp;&nbsp;<span class="pl-k">local</span> group_flood_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>flood<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC618'>&nbsp;&nbsp;<span class="pl-k">if</span> group_flood_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC619'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Flood is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC620'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC621'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>flood<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC622'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC623'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Flood has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC624'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC625'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC626'><br></div><div class='line js-file-line' id='LC627'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_flood</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC628'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC629'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC630'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC631'>&nbsp;&nbsp;<span class="pl-k">local</span> group_flood_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>flood<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC632'>&nbsp;&nbsp;<span class="pl-k">if</span> group_flood_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC633'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Flood is not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC634'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC635'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>flood<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC636'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC637'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Flood has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC638'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC639'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC640'><br></div><div class='line js-file-line' id='LC641'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_arabic</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC642'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC643'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC644'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC645'>&nbsp;&nbsp;<span class="pl-k">local</span> group_arabic_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_arabic<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC646'>&nbsp;&nbsp;<span class="pl-k">if</span> group_arabic_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC647'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Arabic is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC648'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC649'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_arabic<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC650'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC651'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Arabic has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC652'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC653'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC654'><br></div><div class='line js-file-line' id='LC655'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_arabic</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC656'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC657'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC658'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC659'>&nbsp;&nbsp;<span class="pl-k">local</span> group_arabic_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_arabic<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC660'>&nbsp;&nbsp;<span class="pl-k">if</span> group_arabic_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC661'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Arabic/Persian is already unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC662'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC663'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_arabic<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC664'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC665'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Arabic/Persian has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC666'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC667'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC668'><br></div><div class='line js-file-line' id='LC669'><br></div><div class='line js-file-line' id='LC670'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_membermod</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC671'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC672'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC673'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC674'>&nbsp;&nbsp;<span class="pl-k">local</span> group_member_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_member<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC675'>&nbsp;&nbsp;<span class="pl-k">if</span> group_member_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC676'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup members are already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC677'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC678'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_member<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC679'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC680'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC681'>&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup members has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC682'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC683'><br></div><div class='line js-file-line' id='LC684'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_membermod</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC685'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC686'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC687'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC688'>&nbsp;&nbsp;<span class="pl-k">local</span> group_member_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_member<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC689'>&nbsp;&nbsp;<span class="pl-k">if</span> group_member_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC690'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup members are not locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC691'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC692'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_member<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC693'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC694'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup members has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC695'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC696'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC697'><br></div><div class='line js-file-line' id='LC698'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_rtl</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC699'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC700'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC701'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC702'>&nbsp;&nbsp;<span class="pl-k">local</span> group_rtl_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_rtl<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC703'>&nbsp;&nbsp;<span class="pl-k">if</span> group_rtl_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC704'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>RTl is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC705'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC706'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_rtl<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC707'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC708'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>RTL has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC709'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC710'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC711'><br></div><div class='line js-file-line' id='LC712'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_rtl</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC713'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC714'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC715'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC716'>&nbsp;&nbsp;<span class="pl-k">local</span> group_rtl_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_rtl<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC717'>&nbsp;&nbsp;<span class="pl-k">if</span> group_rtl_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC718'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>RTL is already unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC719'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC720'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_rtl<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC721'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC722'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>RTL has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC723'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC724'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC725'><br></div><div class='line js-file-line' id='LC726'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_tgservice</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC727'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC728'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC729'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC730'>&nbsp;&nbsp;<span class="pl-k">local</span> group_tgservice_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_tgservice<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC731'>&nbsp;&nbsp;<span class="pl-k">if</span> group_tgservice_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC732'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Tgservice is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC733'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC734'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_tgservice<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC735'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC736'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Tgservice has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC737'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC738'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC739'><br></div><div class='line js-file-line' id='LC740'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_tgservice</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC741'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC742'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC743'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC744'>&nbsp;&nbsp;<span class="pl-k">local</span> group_tgservice_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_tgservice<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC745'>&nbsp;&nbsp;<span class="pl-k">if</span> group_tgservice_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC746'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>TgService Is Not Locked!<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC747'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC748'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_tgservice<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC749'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC750'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Tgservice has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC751'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC752'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC753'><br></div><div class='line js-file-line' id='LC754'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_sticker</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC755'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC756'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC757'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC758'>&nbsp;&nbsp;<span class="pl-k">local</span> group_sticker_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_sticker<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC759'>&nbsp;&nbsp;<span class="pl-k">if</span> group_sticker_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC760'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Sticker posting is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC761'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC762'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_sticker<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC763'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC764'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Sticker posting has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC765'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC766'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC767'><br></div><div class='line js-file-line' id='LC768'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_sticker</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC769'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC770'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC771'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC772'>&nbsp;&nbsp;<span class="pl-k">local</span> group_sticker_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_sticker<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC773'>&nbsp;&nbsp;<span class="pl-k">if</span> group_sticker_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC774'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Sticker posting is already unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC775'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC776'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_sticker<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC777'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC778'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Sticker posting has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC779'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC780'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC781'><br></div><div class='line js-file-line' id='LC782'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_bots</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC783'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC784'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> </div><div class='line js-file-line' id='LC785'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC786'>&nbsp;&nbsp;<span class="pl-k">local</span> group_bots_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_bots<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC787'>&nbsp;&nbsp;<span class="pl-k">if</span> group_bots_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC788'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Bots protection is already enabled<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC789'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC790'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_bots<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC791'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC792'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Bots protection has been enabled<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC793'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC794'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC795'><br></div><div class='line js-file-line' id='LC796'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_bots</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC797'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC798'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> </div><div class='line js-file-line' id='LC799'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC800'>&nbsp;&nbsp;<span class="pl-k">local</span> group_bots_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_bots<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC801'>&nbsp;&nbsp;<span class="pl-k">if</span> group_bots_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC802'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Bots protection is already disabled<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC803'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC804'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_bots<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC805'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC806'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Bots protection has been disabled<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC807'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC808'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC809'><br></div><div class='line js-file-line' id='LC810'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">lock_group_contacts</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC811'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC812'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC813'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC814'>&nbsp;&nbsp;<span class="pl-k">local</span> group_rtl_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_contacts<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC815'>&nbsp;&nbsp;<span class="pl-k">if</span> group_contacts_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC816'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Contact posting is already locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC817'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC818'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_contacts<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC819'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC820'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Contact posting has been locked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC821'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC822'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC823'><br></div><div class='line js-file-line' id='LC824'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unlock_group_contacts</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC825'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC826'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC827'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC828'>&nbsp;&nbsp;<span class="pl-k">local</span> group_contacts_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_contacts<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC829'>&nbsp;&nbsp;<span class="pl-k">if</span> group_contacts_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC830'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Contact posting is already unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC831'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC832'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_contacts<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC833'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC834'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Contact posting has been unlocked<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC835'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC836'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC837'><br></div><div class='line js-file-line' id='LC838'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">enable_strict_rules</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC839'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC840'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC841'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC842'>&nbsp;&nbsp;<span class="pl-k">local</span> group_strict_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>strict<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC843'>&nbsp;&nbsp;<span class="pl-k">if</span> group_strict_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC844'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Settings are already strictly enforced<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC845'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC846'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>strict<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC847'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC848'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Settings will be strictly enforced<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC849'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC850'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC851'><br></div><div class='line js-file-line' id='LC852'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">disable_strict_rules</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC853'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC854'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC855'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC856'>&nbsp;&nbsp;<span class="pl-k">local</span> group_strict_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>strict<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC857'>&nbsp;&nbsp;<span class="pl-k">if</span> group_strict_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC858'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Settings are not strictly enforced<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC859'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC860'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>strict<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC861'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC862'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Settings will not be strictly enforced<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC863'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC864'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC865'><span class="pl-c">--End supergroup locks</span></div><div class='line js-file-line' id='LC866'><br></div><div class='line js-file-line' id='LC867'><span class="pl-c">--&#39;Set supergroup rules&#39; function</span></div><div class='line js-file-line' id='LC868'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">set_rulesmod</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC869'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC870'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC871'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC872'>&nbsp;&nbsp;<span class="pl-k">local</span> data_cat <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>rules<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC873'>&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][data_cat] <span class="pl-k">=</span> rules</div><div class='line js-file-line' id='LC874'>&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC875'>&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup rules set<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC876'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC877'><br></div><div class='line js-file-line' id='LC878'><span class="pl-c">--&#39;Get supergroup rules&#39; function</span></div><div class='line js-file-line' id='LC879'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">get_rules</span>(<span class="pl-smi">msg, data</span>)</div><div class='line js-file-line' id='LC880'>&nbsp;&nbsp;<span class="pl-k">local</span> data_cat <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>rules<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC881'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][data_cat] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC882'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>No rules available.<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC883'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC884'>&nbsp;&nbsp;<span class="pl-k">local</span> rules <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][data_cat]</div><div class='line js-file-line' id='LC885'>&nbsp;&nbsp;<span class="pl-k">local</span> group_name <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>set_name<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC886'>&nbsp;&nbsp;<span class="pl-k">local</span> rules <span class="pl-k">=</span> group_name<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span> rules:<span class="pl-cce">\n\n</span><span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>rules:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>/n<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC887'>&nbsp;&nbsp;<span class="pl-k">return</span> rules</div><div class='line js-file-line' id='LC888'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC889'><br></div><div class='line js-file-line' id='LC890'><span class="pl-c">--Set supergroup to public or not public function</span></div><div class='line js-file-line' id='LC891'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">set_public_membermod</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC892'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC893'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>For moderators only!<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC894'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC895'>&nbsp;&nbsp;<span class="pl-k">local</span> group_public_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>public<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC896'>&nbsp;&nbsp;<span class="pl-k">local</span> long_id <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>long_id<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC897'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> long_id <span class="pl-k">then</span></div><div class='line js-file-line' id='LC898'>	data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>long_id<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC899'>	<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC900'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC901'>&nbsp;&nbsp;<span class="pl-k">if</span> group_public_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC902'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Group is already public<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC903'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC904'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>public<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC905'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC906'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC907'>&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup is now: public<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC908'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC909'><br></div><div class='line js-file-line' id='LC910'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">unset_public_membermod</span>(<span class="pl-smi">msg, data, target</span>)</div><div class='line js-file-line' id='LC911'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC912'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC913'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC914'>&nbsp;&nbsp;<span class="pl-k">local</span> group_public_lock <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>public<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC915'>&nbsp;&nbsp;<span class="pl-k">local</span> long_id <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>long_id<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC916'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> long_id <span class="pl-k">then</span></div><div class='line js-file-line' id='LC917'>	data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>long_id<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC918'>	<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC919'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC920'>&nbsp;&nbsp;<span class="pl-k">if</span> group_public_lock <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC921'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Group is not public<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC922'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC923'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>public<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC924'>	data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>long_id<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">long_id</span></div><div class='line js-file-line' id='LC925'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC926'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup is now: not public<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC927'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC928'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC929'><br></div><div class='line js-file-line' id='LC930'><span class="pl-c">--Show supergroup settings; function</span></div><div class='line js-file-line' id='LC931'><span class="pl-k">function</span> <span class="pl-en">show_supergroup_settingsmod</span>(<span class="pl-smi">msg, target</span>)</div><div class='line js-file-line' id='LC932'>&nbsp;	<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC933'>&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-k">return</span></div><div class='line js-file-line' id='LC934'>&nbsp;&nbsp;	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC935'>	<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC936'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC937'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>flood_msg_max<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC938'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	NUM_MSG_MAX <span class="pl-k">=</span> <span class="pl-c1">tonumber</span>(data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>flood_msg_max<span class="pl-pds">&#39;</span></span>])</div><div class='line js-file-line' id='LC939'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>custom<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>NUM_MSG_MAX)</div><div class='line js-file-line' id='LC940'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-k">else</span></div><div class='line js-file-line' id='LC941'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	NUM_MSG_MAX <span class="pl-k">=</span> <span class="pl-c1">5</span></div><div class='line js-file-line' id='LC942'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC943'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC944'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> bots_protection <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Yes<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC945'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_bots<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC946'>&nbsp;&nbsp;&nbsp;&nbsp;	bots_protection <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_bots<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC947'>&nbsp;&nbsp;&nbsp;	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC948'>	<span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC949'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>public<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC950'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>public<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC951'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC952'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC953'>	<span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC954'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_rtl<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC955'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_rtl<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC956'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC957'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC958'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC959'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_tgservice<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC960'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_tgservice<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC961'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC962'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC963'>	  <span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC964'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>tag<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC965'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>tag<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC966'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC967'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC968'>	  <span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC969'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>emoji<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC970'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>emoji<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC971'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC972'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC973'>	  <span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC974'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>english<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC975'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>english<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC976'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC977'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC978'>	  <span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC979'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>fwd<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC980'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>fwd<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC981'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC982'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC983'>	  <span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC984'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>reply<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC985'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>reply<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC986'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC987'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC988'>	  <span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC989'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>join<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC990'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>join<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC991'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC992'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC993'>	  <span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC994'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>fosh<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC995'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>fosh<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC996'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC997'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC998'>	  <span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC999'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>username<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1000'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>username<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1001'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1002'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1003'>	  <span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1004'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>media<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1005'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>media<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1006'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1007'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1008'>	  <span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1009'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>leave<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1010'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>leave<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1011'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1012'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1013'>	<span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1014'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_member<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1015'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>lock_member<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1016'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1017'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1018'>	<span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1019'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>all<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1020'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>all<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1021'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1022'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1023'>	<span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1024'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>operator<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1025'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>operator<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1026'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1027'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1028'>	<span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1029'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>etehad<span class="pl-pds">&#39;</span></span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1030'>			data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>etehad<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1031'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1032'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1033'>&nbsp;&nbsp;<span class="pl-k">local</span> gp_type <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>group_type<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC1034'>&nbsp;&nbsp;</div><div class='line js-file-line' id='LC1035'>&nbsp;&nbsp;<span class="pl-k">local</span> settings <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(target)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC1036'>&nbsp;&nbsp;local text = &quot;____________________\n⚙SuperGroup settings⚙:⬇️\n____________________\n&gt;Lock links : &quot;..settings.lock_link..&quot;\n&gt;Lock contacts: &quot;..settings.lock_contacts..&quot;\n&gt;Lock flood: &quot;..settings.flood..&quot;\n&gt;Flood sensitivity : &quot;..NUM_MSG_MAX..&quot;\n&gt;Lock spam: &quot;..settings.lock_spam..&quot;\n&gt;Lock Arabic: &quot;..settings.lock_arabic..&quot;\n&gt;Lock Member: &quot;..settings.lock_member..&quot;\n&gt;Lock RTL: &quot;..settings.lock_rtl..&quot;\n&gt;Lock Tgservice: &quot;..settings.lock_tgservice..&quot;\n&gt;Lock sticker: &quot;..settings.lock_sticker..&quot;\n&gt;Lock tag(#): &quot;..settings.tag..&quot;\n&gt;Lock emoji: &quot;..settings.emoji..&quot;\n&gt;Lock english: &quot;..settings.english..&quot;\n&gt;Lock fwd(forward): &quot;..settings.fwd..&quot;\n&gt;Lock reply: &quot;..settings.reply..&quot;\n&gt;Lock join: &quot;..settings.join..&quot;\n&gt;Lock username(@): &quot;..settings.username..&quot;\n&gt;Lock media: &quot;..settings.media..&quot;\n&gt;Lock fosh: &quot;..settings.fosh..&quot;\n&gt;Lock leave: &quot;..settings.leave..&quot;\n&gt;Lock bots: &quot;..bots_protection..&quot;\n&gt;Lock operator: &quot;..settings.operator..&quot;\n____________________\n⚙Easy Sweet&amp;Faster Switch⚙:⬇️\n____________________\n&gt;Switch Model Etehad: &quot;..settings.etehad..&quot;\n&gt;Lock all: &quot;..settings.all..&quot;\n____________________\nℹ️About Groupℹ️:⬇️\n____________________\n&gt;group type: &quot;..gp_type..&quot;\n&gt;Public: &quot;..settings.public..&quot;\n&gt;Strict settings: &quot;..settings.strict..&quot;\n____________________\n&gt;&gt;bot version : v2.9&lt;&lt;\n&gt;&gt;&gt;👑MeGa shield👑&lt;&lt;&lt;\n&gt;&gt;@shieldTM&lt;&lt;&quot;</div><div class='line js-file-line' id='LC1037'>&nbsp;&nbsp;<span class="pl-k">return</span> text</div><div class='line js-file-line' id='LC1038'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC1039'><br></div><div class='line js-file-line' id='LC1040'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">promote_admin</span>(<span class="pl-smi">receiver, member_username, user_id</span>)</div><div class='line js-file-line' id='LC1041'>&nbsp;&nbsp;<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC1042'>&nbsp;&nbsp;<span class="pl-k">local</span> group <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1043'>&nbsp;&nbsp;<span class="pl-k">local</span> member_tag_username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(member_username, <span class="pl-s"><span class="pl-pds">&#39;</span>@<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span>(at)<span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1044'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> data[group] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1045'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1046'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1047'>&nbsp;&nbsp;<span class="pl-k">if</span> data[group][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>][<span class="pl-c1">tostring</span>(user_id)] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1048'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(receiver, member_username<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span> is already a moderator.<span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1049'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1050'>&nbsp;&nbsp;data[group][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>][<span class="pl-c1">tostring</span>(user_id)] <span class="pl-k">=</span> member_tag_username</div><div class='line js-file-line' id='LC1051'>&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC1052'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC1053'><br></div><div class='line js-file-line' id='LC1054'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">demote_admin</span>(<span class="pl-smi">receiver, member_username, user_id</span>)</div><div class='line js-file-line' id='LC1055'>&nbsp;&nbsp;<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC1056'>&nbsp;&nbsp;<span class="pl-k">local</span> group <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1057'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> data[group] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1058'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1059'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1060'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> data[group][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>][<span class="pl-c1">tostring</span>(user_id)] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1061'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(receiver, member_tag_username<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span> is not a moderator.<span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1062'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1063'>&nbsp;&nbsp;data[group][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>][<span class="pl-c1">tostring</span>(user_id)] <span class="pl-k">=</span> <span class="pl-c1">nil</span></div><div class='line js-file-line' id='LC1064'>&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC1065'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC1066'><br></div><div class='line js-file-line' id='LC1067'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">promote2</span>(<span class="pl-smi">receiver, member_username, user_id</span>)</div><div class='line js-file-line' id='LC1068'>&nbsp;&nbsp;<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC1069'>&nbsp;&nbsp;<span class="pl-k">local</span> group <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1070'>&nbsp;&nbsp;<span class="pl-k">local</span> member_tag_username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(member_username, <span class="pl-s"><span class="pl-pds">&#39;</span>@<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span>(at)<span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1071'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> data[group] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1072'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup is not added.<span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1073'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1074'>&nbsp;&nbsp;<span class="pl-k">if</span> data[group][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>][<span class="pl-c1">tostring</span>(user_id)] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1075'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(receiver, member_username<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span> is already a moderator.<span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1076'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1077'>&nbsp;&nbsp;data[group][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>][<span class="pl-c1">tostring</span>(user_id)] <span class="pl-k">=</span> member_tag_username</div><div class='line js-file-line' id='LC1078'>&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC1079'>&nbsp;&nbsp;<span class="pl-c1">send_large_msg</span>(receiver, member_username<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span> has been promoted.<span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1080'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC1081'><br></div><div class='line js-file-line' id='LC1082'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">demote2</span>(<span class="pl-smi">receiver, member_username, user_id</span>)</div><div class='line js-file-line' id='LC1083'>&nbsp;&nbsp;<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC1084'>&nbsp;&nbsp;<span class="pl-k">local</span> group <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1085'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> data[group] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1086'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>Group is not added.<span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1087'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1088'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> data[group][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>][<span class="pl-c1">tostring</span>(user_id)] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1089'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(receiver, member_tag_username<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span> is not a moderator.<span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1090'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1091'>&nbsp;&nbsp;data[group][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>][<span class="pl-c1">tostring</span>(user_id)] <span class="pl-k">=</span> <span class="pl-c1">nil</span></div><div class='line js-file-line' id='LC1092'>&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC1093'>&nbsp;&nbsp;<span class="pl-c1">send_large_msg</span>(receiver, member_username<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span> has been demoted.<span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1094'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC1095'><br></div><div class='line js-file-line' id='LC1096'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">modlist</span>(<span class="pl-smi">msg</span>)</div><div class='line js-file-line' id='LC1097'>&nbsp;&nbsp;<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC1098'>&nbsp;&nbsp;<span class="pl-k">local</span> groups <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>groups<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1099'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(groups)][<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1100'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup is not added.<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1101'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1102'>&nbsp;&nbsp;<span class="pl-c">-- determine if table is empty</span></div><div class='line js-file-line' id='LC1103'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-c1">next</span>(data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>]) <span class="pl-k">==</span> <span class="pl-c1">nil</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1104'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>No moderator in this group.<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1105'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1106'>&nbsp;&nbsp;<span class="pl-k">local</span> i <span class="pl-k">=</span> <span class="pl-c1">1</span></div><div class='line js-file-line' id='LC1107'>&nbsp;&nbsp;<span class="pl-k">local</span> message <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-cce">\n</span>List of moderators for <span class="pl-pds">&#39;</span></span> <span class="pl-k">..</span> <span class="pl-c1">string.gsub</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">print_name</span>, <span class="pl-s"><span class="pl-pds">&#39;</span>_<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span> <span class="pl-pds">&#39;</span></span>) <span class="pl-k">..</span> <span class="pl-s"><span class="pl-pds">&#39;</span>:<span class="pl-cce">\n</span><span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1108'>&nbsp;&nbsp;<span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>]) <span class="pl-k">do</span></div><div class='line js-file-line' id='LC1109'>&nbsp;&nbsp;&nbsp;&nbsp;message <span class="pl-k">=</span> message <span class="pl-k">..</span>i<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span> - <span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>v<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span> [<span class="pl-pds">&#39;</span></span> <span class="pl-k">..</span>k<span class="pl-k">..</span> <span class="pl-s"><span class="pl-pds">&#39;</span>] <span class="pl-cce">\n</span><span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1110'>&nbsp;&nbsp;&nbsp;&nbsp;i <span class="pl-k">=</span> i <span class="pl-k">+</span> <span class="pl-c1">1</span></div><div class='line js-file-line' id='LC1111'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1112'>&nbsp;&nbsp;<span class="pl-k">return</span> message</div><div class='line js-file-line' id='LC1113'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC1114'><br></div><div class='line js-file-line' id='LC1115'><span class="pl-c">-- Start by reply actions</span></div><div class='line js-file-line' id='LC1116'><span class="pl-k">function</span> <span class="pl-en">get_message_callback</span>(<span class="pl-smi">extra, success, result</span>)</div><div class='line js-file-line' id='LC1117'>	<span class="pl-k">local</span> get_cmd <span class="pl-k">=</span> extra.<span class="pl-smi">get_cmd</span></div><div class='line js-file-line' id='LC1118'>	<span class="pl-k">local</span> msg <span class="pl-k">=</span> extra.<span class="pl-smi">msg</span></div><div class='line js-file-line' id='LC1119'>	<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC1120'>	<span class="pl-k">local</span> print_name <span class="pl-k">=</span> <span class="pl-c1">user_print_name</span>(msg.<span class="pl-smi">from</span>):<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>‮<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1121'>	<span class="pl-k">local</span> name_log <span class="pl-k">=</span> print_name:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>_<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1122'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>id<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-k">not</span> result.<span class="pl-smi">action</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1123'>		<span class="pl-k">local</span> channel <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1124'>		<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] obtained id for: [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>]<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1125'>		id1 <span class="pl-k">=</span> <span class="pl-c1">send_large_msg</span>(channel, result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span>)</div><div class='line js-file-line' id='LC1126'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>id<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> result.<span class="pl-smi">action</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1127'>		<span class="pl-k">local</span> action <span class="pl-k">=</span> result.<span class="pl-smi">action</span>.<span class="pl-smi">type</span></div><div class='line js-file-line' id='LC1128'>		<span class="pl-k">if</span> action <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_add_user<span class="pl-pds">&#39;</span></span> <span class="pl-k">or</span> action <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_del_user<span class="pl-pds">&#39;</span></span> <span class="pl-k">or</span> action <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_rename<span class="pl-pds">&#39;</span></span> <span class="pl-k">or</span> action <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_change_photo<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1129'>			<span class="pl-k">if</span> result.<span class="pl-smi">action</span>.<span class="pl-smi">user</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1130'>				user_id <span class="pl-k">=</span> result.<span class="pl-smi">action</span>.<span class="pl-smi">user</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1131'>			<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1132'>				user_id <span class="pl-k">=</span> result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1133'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1134'>			<span class="pl-k">local</span> channel <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1135'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] obtained id by service msg for: [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>]<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1136'>			id1 <span class="pl-k">=</span> <span class="pl-c1">send_large_msg</span>(channel, user_id)</div><div class='line js-file-line' id='LC1137'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1138'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>idfrom<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1139'>		<span class="pl-k">local</span> channel <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1140'>		<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] obtained id for msg fwd from: [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">fwd_from</span>.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>]<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1141'>		id2 <span class="pl-k">=</span> <span class="pl-c1">send_large_msg</span>(channel, result.<span class="pl-smi">fwd_from</span>.<span class="pl-smi">peer_id</span>)</div><div class='line js-file-line' id='LC1142'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel_block<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-k">not</span> result.<span class="pl-smi">action</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1143'>		<span class="pl-k">local</span> member_id <span class="pl-k">=</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1144'>		<span class="pl-k">local</span> channel_id <span class="pl-k">=</span> result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1145'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> member_id <span class="pl-k">==</span> msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1146'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>Leave using kickme command<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1147'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1148'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-c1">is_momod2</span>(member_id, channel_id) <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_admin2</span>(msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1149'>			   <span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>You can&#39;t kick mods/owner/admins<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1150'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1151'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-c1">is_admin2</span>(member_id) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1152'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>You can&#39;t kick other admins<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1153'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1154'>		<span class="pl-c">--savelog(msg.to.id, name_log..&quot; [&quot;..msg.from.id..&quot;] kicked: [&quot;..user_id..&quot;] by reply&quot;)</span></div><div class='line js-file-line' id='LC1155'>		<span class="pl-c1">kick_user</span>(member_id, channel_id)</div><div class='line js-file-line' id='LC1156'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel_block<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> result.<span class="pl-smi">action</span> <span class="pl-k">and</span> result.<span class="pl-smi">action</span>.<span class="pl-smi">type</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_add_user<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1157'>		<span class="pl-k">local</span> user_id <span class="pl-k">=</span> result.<span class="pl-smi">action</span>.<span class="pl-smi">user</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1158'>		<span class="pl-k">local</span> channel_id <span class="pl-k">=</span> result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1159'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> member_id <span class="pl-k">==</span> msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1160'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>Leave using kickme command<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1161'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1162'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-c1">is_momod2</span>(member_id, channel_id) <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_admin2</span>(msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1163'>			   <span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>You can&#39;t kick mods/owner/admins<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1164'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1165'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-c1">is_admin2</span>(member_id) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1166'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>You can&#39;t kick other admins<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1167'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1168'>		<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] kicked: [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] by reply to sev. msg.<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1169'>		<span class="pl-c1">kick_user</span>(user_id, channel_id)</div><div class='line js-file-line' id='LC1170'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>del<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1171'>		<span class="pl-c1">delete_msg</span>(result.<span class="pl-smi">id</span>, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1172'>		<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] deleted a message by reply<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1173'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>setadmin<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1174'>		<span class="pl-k">local</span> user_id <span class="pl-k">=</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1175'>		<span class="pl-k">local</span> channel_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1176'>		<span class="pl-c1">channel_set_admin</span>(channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1177'>		<span class="pl-k">if</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1178'>			text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">from</span>.<span class="pl-smi">username</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> set as an admin<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1179'>		<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1180'>			text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>[ <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> ]set as an admin<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1181'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1182'>		<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set: [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] as admin by reply<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1183'>		<span class="pl-c1">send_large_msg</span>(channel_id, text)</div><div class='line js-file-line' id='LC1184'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>demoteadmin<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1185'>		<span class="pl-k">local</span> user_id <span class="pl-k">=</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1186'>		<span class="pl-k">local</span> channel_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1187'>		<span class="pl-k">if</span> <span class="pl-c1">is_admin2</span>(result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1188'>			<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>You can&#39;t demote global admins!<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1189'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1190'>		<span class="pl-c1">channel_demote</span>(channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1191'>		<span class="pl-k">if</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1192'>			text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">from</span>.<span class="pl-smi">username</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been demoted from admin<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1193'>		<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1194'>			text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>[ <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> ] has been demoted from admin<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1195'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1196'>		<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] demoted: [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] from admin by reply<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1197'>		<span class="pl-c1">send_large_msg</span>(channel_id, text)</div><div class='line js-file-line' id='LC1198'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>setowner<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1199'>		<span class="pl-k">local</span> group_owner <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>set_owner<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC1200'>		<span class="pl-k">if</span> group_owner <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1201'>		<span class="pl-k">local</span> channel_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1202'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_admin2</span>(<span class="pl-c1">tonumber</span>(group_owner)) <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_support</span>(<span class="pl-c1">tonumber</span>(group_owner)) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1203'>				<span class="pl-k">local</span> user <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>group_owner</div><div class='line js-file-line' id='LC1204'>				<span class="pl-c1">channel_demote</span>(channel_id, user, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1205'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1206'>			<span class="pl-k">local</span> user_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1207'>			<span class="pl-c1">channel_set_admin</span>(channel_id, user_id, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1208'>			data[<span class="pl-c1">tostring</span>(result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>set_owner<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-c1">tostring</span>(result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span>)</div><div class='line js-file-line' id='LC1209'>			<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC1210'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set: [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] as owner by reply<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1211'>			<span class="pl-k">if</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1212'>				text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">from</span>.<span class="pl-smi">username</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [ <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> ] added as owner<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1213'>			<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1214'>				text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>[ <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> ] added as owner<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1215'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1216'>			<span class="pl-c1">send_large_msg</span>(channel_id, text)</div><div class='line js-file-line' id='LC1217'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1218'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>promote<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1219'>		<span class="pl-k">local</span> receiver <span class="pl-k">=</span> result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1220'>		<span class="pl-k">local</span> full_name <span class="pl-k">=</span> (result.<span class="pl-smi">from</span>.<span class="pl-smi">first_name</span> <span class="pl-k">or</span> <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span> <span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>(result.<span class="pl-smi">from</span>.<span class="pl-smi">last_name</span> <span class="pl-k">or</span> <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1221'>		<span class="pl-k">local</span> member_name <span class="pl-k">=</span> full_name:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>‮<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1222'>		<span class="pl-k">local</span> member_username <span class="pl-k">=</span> member_name:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>_<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1223'>		<span class="pl-k">if</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1224'>			member_username <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>@<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC1225'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1226'>		<span class="pl-k">local</span> member_id <span class="pl-k">=</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1227'>		<span class="pl-k">if</span> result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_type</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1228'>		<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] promoted mod: @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>member_username<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>[<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] by reply<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1229'>		<span class="pl-c1">promote2</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span>, member_username, member_id)</div><div class='line js-file-line' id='LC1230'>	    <span class="pl-c">--channel_set_mod(channel_id, user, ok_cb, false)</span></div><div class='line js-file-line' id='LC1231'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1232'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>demote<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1233'>		<span class="pl-k">local</span> full_name <span class="pl-k">=</span> (result.<span class="pl-smi">from</span>.<span class="pl-smi">first_name</span> <span class="pl-k">or</span> <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span> <span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>(result.<span class="pl-smi">from</span>.<span class="pl-smi">last_name</span> <span class="pl-k">or</span> <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1234'>		<span class="pl-k">local</span> member_name <span class="pl-k">=</span> full_name:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>‮<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1235'>		<span class="pl-k">local</span> member_username <span class="pl-k">=</span> member_name:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>_<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1236'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1237'>		member_username <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>@<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC1238'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1239'>		<span class="pl-k">local</span> member_id <span class="pl-k">=</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1240'>		<span class="pl-c">--local user = &quot;user#id&quot;..result.peer_id</span></div><div class='line js-file-line' id='LC1241'>		<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] demoted mod: @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>member_username<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>[<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] by reply<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1242'>		<span class="pl-c1">demote2</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span>, member_username, member_id)</div><div class='line js-file-line' id='LC1243'>		<span class="pl-c">--channel_demote(channel_id, user, ok_cb, false)</span></div><div class='line js-file-line' id='LC1244'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>mute_user<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1245'>		<span class="pl-k">if</span> result.<span class="pl-smi">service</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1246'>			<span class="pl-k">local</span> action <span class="pl-k">=</span> result.<span class="pl-smi">action</span>.<span class="pl-smi">type</span></div><div class='line js-file-line' id='LC1247'>			<span class="pl-k">if</span> action <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_add_user<span class="pl-pds">&#39;</span></span> <span class="pl-k">or</span> action <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_del_user<span class="pl-pds">&#39;</span></span> <span class="pl-k">or</span> action <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_rename<span class="pl-pds">&#39;</span></span> <span class="pl-k">or</span> action <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_change_photo<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1248'>				<span class="pl-k">if</span> result.<span class="pl-smi">action</span>.<span class="pl-smi">user</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1249'>					user_id <span class="pl-k">=</span> result.<span class="pl-smi">action</span>.<span class="pl-smi">user</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1250'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1251'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1252'>			<span class="pl-k">if</span> action <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_add_user_link<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1253'>				<span class="pl-k">if</span> result.<span class="pl-smi">from</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1254'>					user_id <span class="pl-k">=</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1255'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1256'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1257'>		<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1258'>			user_id <span class="pl-k">=</span> result.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1259'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1260'>		<span class="pl-k">local</span> receiver <span class="pl-k">=</span> extra.<span class="pl-smi">receiver</span></div><div class='line js-file-line' id='LC1261'>		<span class="pl-k">local</span> chat_id <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC1262'>		<span class="pl-c1">print</span>(user_id)</div><div class='line js-file-line' id='LC1263'>		<span class="pl-c1">print</span>(chat_id)</div><div class='line js-file-line' id='LC1264'>		<span class="pl-k">if</span> <span class="pl-c1">is_muted_user</span>(chat_id, user_id) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1265'>			<span class="pl-c1">unmute_user</span>(chat_id, user_id)</div><div class='line js-file-line' id='LC1266'>			<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&quot;</span>[<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] removed from the muted user list<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1267'>		<span class="pl-k">elseif</span> <span class="pl-c1">is_admin1</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1268'>			<span class="pl-c1">mute_user</span>(chat_id, user_id)</div><div class='line js-file-line' id='LC1269'>			<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] added to the muted user list<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1270'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1271'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1272'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC1273'><span class="pl-c">-- End by reply actions</span></div><div class='line js-file-line' id='LC1274'><br></div><div class='line js-file-line' id='LC1275'><span class="pl-c">--By ID actions</span></div><div class='line js-file-line' id='LC1276'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">cb_user_info</span>(<span class="pl-smi">extra, success, result</span>)</div><div class='line js-file-line' id='LC1277'>	<span class="pl-k">local</span> receiver <span class="pl-k">=</span> extra.<span class="pl-smi">receiver</span></div><div class='line js-file-line' id='LC1278'>	<span class="pl-k">local</span> user_id <span class="pl-k">=</span> result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1279'>	<span class="pl-k">local</span> get_cmd <span class="pl-k">=</span> extra.<span class="pl-smi">get_cmd</span></div><div class='line js-file-line' id='LC1280'>	<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC1281'>	<span class="pl-c">--[[if get_cmd == &quot;setadmin&quot; then</span></div><div class='line js-file-line' id='LC1282'><span class="pl-c">		local user_id = &quot;user#id&quot;..result.peer_id</span></div><div class='line js-file-line' id='LC1283'><span class="pl-c">		channel_set_admin(receiver, user_id, ok_cb, false)</span></div><div class='line js-file-line' id='LC1284'><span class="pl-c">		if result.username then</span></div><div class='line js-file-line' id='LC1285'><span class="pl-c">			text = &quot;@&quot;..result.username..&quot; has been set as an admin&quot;</span></div><div class='line js-file-line' id='LC1286'><span class="pl-c">		else</span></div><div class='line js-file-line' id='LC1287'><span class="pl-c">			text = &quot;[ &quot;..result.peer_id..&quot; ] has been set as an admin&quot;</span></div><div class='line js-file-line' id='LC1288'><span class="pl-c">		end</span></div><div class='line js-file-line' id='LC1289'><span class="pl-c">			send_large_msg(receiver, text)]]</span></div><div class='line js-file-line' id='LC1290'>	<span class="pl-k">if</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>demoteadmin<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1291'>		<span class="pl-k">if</span> <span class="pl-c1">is_admin2</span>(result.<span class="pl-smi">peer_id</span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1292'>			<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&quot;</span>You can&#39;t demote global admins!<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1293'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1294'>		<span class="pl-k">local</span> user_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1295'>		<span class="pl-c1">channel_demote</span>(receiver, user_id, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1296'>		<span class="pl-k">if</span> result.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1297'>			text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">username</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been demoted from admin<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1298'>			<span class="pl-c1">send_large_msg</span>(receiver, text)</div><div class='line js-file-line' id='LC1299'>		<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1300'>			text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>[ <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> ] has been demoted from admin<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1301'>			<span class="pl-c1">send_large_msg</span>(receiver, text)</div><div class='line js-file-line' id='LC1302'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1303'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>promote<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1304'>		<span class="pl-k">if</span> result.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1305'>			member_username <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC1306'>		<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1307'>			member_username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(result.<span class="pl-smi">print_name</span>, <span class="pl-s"><span class="pl-pds">&#39;</span>_<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span> <span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1308'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1309'>		<span class="pl-c1">promote2</span>(receiver, member_username, user_id)</div><div class='line js-file-line' id='LC1310'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>demote<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1311'>		<span class="pl-k">if</span> result.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1312'>			member_username <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC1313'>		<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1314'>			member_username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(result.<span class="pl-smi">print_name</span>, <span class="pl-s"><span class="pl-pds">&#39;</span>_<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span> <span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1315'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1316'>		<span class="pl-c1">demote2</span>(receiver, member_username, user_id)</div><div class='line js-file-line' id='LC1317'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1318'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC1319'><br></div><div class='line js-file-line' id='LC1320'><span class="pl-c">-- Begin resolve username actions</span></div><div class='line js-file-line' id='LC1321'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">callbackres</span>(<span class="pl-smi">extra, success, result</span>)</div><div class='line js-file-line' id='LC1322'>&nbsp;&nbsp;<span class="pl-k">local</span> member_id <span class="pl-k">=</span> result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1323'>&nbsp;&nbsp;<span class="pl-k">local</span> member_username <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC1324'>&nbsp;&nbsp;<span class="pl-k">local</span> get_cmd <span class="pl-k">=</span> extra.<span class="pl-smi">get_cmd</span></div><div class='line js-file-line' id='LC1325'>	<span class="pl-k">if</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>res<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1326'>		<span class="pl-k">local</span> user <span class="pl-k">=</span> result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1327'>		<span class="pl-k">local</span> name <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(result.<span class="pl-smi">print_name</span>, <span class="pl-s"><span class="pl-pds">&quot;</span>_<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1328'>		<span class="pl-k">local</span> channel <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>extra.<span class="pl-smi">channelid</span></div><div class='line js-file-line' id='LC1329'>		<span class="pl-c1">send_large_msg</span>(channel, user<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-cce">\n</span><span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>name)</div><div class='line js-file-line' id='LC1330'>		<span class="pl-k">return</span> user</div><div class='line js-file-line' id='LC1331'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>id<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1332'>		<span class="pl-k">local</span> user <span class="pl-k">=</span> result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1333'>		<span class="pl-k">local</span> channel <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>extra.<span class="pl-smi">channelid</span></div><div class='line js-file-line' id='LC1334'>		<span class="pl-c1">send_large_msg</span>(channel, user)</div><div class='line js-file-line' id='LC1335'>		<span class="pl-k">return</span> user</div><div class='line js-file-line' id='LC1336'>&nbsp;&nbsp;<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>invite<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1337'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> receiver <span class="pl-k">=</span> extra.<span class="pl-smi">channel</span></div><div class='line js-file-line' id='LC1338'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> user_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1339'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">channel_invite</span>(receiver, user_id, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1340'>	<span class="pl-c">--[[elseif get_cmd == &quot;channel_block&quot; then</span></div><div class='line js-file-line' id='LC1341'><span class="pl-c">		local user_id = result.peer_id</span></div><div class='line js-file-line' id='LC1342'><span class="pl-c">		local channel_id = extra.channelid</span></div><div class='line js-file-line' id='LC1343'><span class="pl-c">    local sender = extra.sender</span></div><div class='line js-file-line' id='LC1344'><span class="pl-c">    if member_id == sender then</span></div><div class='line js-file-line' id='LC1345'><span class="pl-c">      return send_large_msg(&quot;channel#id&quot;..channel_id, &quot;Leave using kickme command&quot;)</span></div><div class='line js-file-line' id='LC1346'><span class="pl-c">    end</span></div><div class='line js-file-line' id='LC1347'><span class="pl-c">		if is_momod2(member_id, channel_id) and not is_admin2(sender) then</span></div><div class='line js-file-line' id='LC1348'><span class="pl-c">			   return send_large_msg(&quot;channel#id&quot;..channel_id, &quot;You can&#39;t kick mods/owner/admins&quot;)</span></div><div class='line js-file-line' id='LC1349'><span class="pl-c">    end</span></div><div class='line js-file-line' id='LC1350'><span class="pl-c">    if is_admin2(member_id) then</span></div><div class='line js-file-line' id='LC1351'><span class="pl-c">         return send_large_msg(&quot;channel#id&quot;..channel_id, &quot;You can&#39;t kick other admins&quot;)</span></div><div class='line js-file-line' id='LC1352'><span class="pl-c">    end</span></div><div class='line js-file-line' id='LC1353'><span class="pl-c">		kick_user(user_id, channel_id)</span></div><div class='line js-file-line' id='LC1354'><span class="pl-c">	elseif get_cmd == &quot;setadmin&quot; then</span></div><div class='line js-file-line' id='LC1355'><span class="pl-c">		local user_id = &quot;user#id&quot;..result.peer_id</span></div><div class='line js-file-line' id='LC1356'><span class="pl-c">		local channel_id = extra.channel</span></div><div class='line js-file-line' id='LC1357'><span class="pl-c">		channel_set_admin(channel_id, user_id, ok_cb, false)</span></div><div class='line js-file-line' id='LC1358'><span class="pl-c">		if result.username then</span></div><div class='line js-file-line' id='LC1359'><span class="pl-c">			text = &quot;@&quot;..result.username..&quot; has been set as an admin&quot;</span></div><div class='line js-file-line' id='LC1360'><span class="pl-c">			send_large_msg(channel_id, text)</span></div><div class='line js-file-line' id='LC1361'><span class="pl-c">		else</span></div><div class='line js-file-line' id='LC1362'><span class="pl-c">			text = &quot;@&quot;..result.peer_id..&quot; has been set as an admin&quot;</span></div><div class='line js-file-line' id='LC1363'><span class="pl-c">			send_large_msg(channel_id, text)</span></div><div class='line js-file-line' id='LC1364'><span class="pl-c">		end</span></div><div class='line js-file-line' id='LC1365'><span class="pl-c">	elseif get_cmd == &quot;setowner&quot; then</span></div><div class='line js-file-line' id='LC1366'><span class="pl-c">		local receiver = extra.channel</span></div><div class='line js-file-line' id='LC1367'><span class="pl-c">		local channel = string.gsub(receiver, &#39;channel#id&#39;, &#39;&#39;)</span></div><div class='line js-file-line' id='LC1368'><span class="pl-c">		local from_id = extra.from_id</span></div><div class='line js-file-line' id='LC1369'><span class="pl-c">		local group_owner = data[tostring(channel)][&#39;set_owner&#39;]</span></div><div class='line js-file-line' id='LC1370'><span class="pl-c">		if group_owner then</span></div><div class='line js-file-line' id='LC1371'><span class="pl-c">			local user = &quot;user#id&quot;..group_owner</span></div><div class='line js-file-line' id='LC1372'><span class="pl-c">			if not is_admin2(group_owner) and not is_support(group_owner) then</span></div><div class='line js-file-line' id='LC1373'><span class="pl-c">				channel_demote(receiver, user, ok_cb, false)</span></div><div class='line js-file-line' id='LC1374'><span class="pl-c">			end</span></div><div class='line js-file-line' id='LC1375'><span class="pl-c">			local user_id = &quot;user#id&quot;..result.peer_id</span></div><div class='line js-file-line' id='LC1376'><span class="pl-c">			channel_set_admin(receiver, user_id, ok_cb, false)</span></div><div class='line js-file-line' id='LC1377'><span class="pl-c">			data[tostring(channel)][&#39;set_owner&#39;] = tostring(result.peer_id)</span></div><div class='line js-file-line' id='LC1378'><span class="pl-c">			save_data(_config.moderation.data, data)</span></div><div class='line js-file-line' id='LC1379'><span class="pl-c">			savelog(channel, name_log..&quot; [&quot;..from_id..&quot;] set [&quot;..result.peer_id..&quot;] as owner by username&quot;)</span></div><div class='line js-file-line' id='LC1380'><span class="pl-c">		if result.username then</span></div><div class='line js-file-line' id='LC1381'><span class="pl-c">			text = member_username..&quot; [ &quot;..result.peer_id..&quot; ] added as owner&quot;</span></div><div class='line js-file-line' id='LC1382'><span class="pl-c">		else</span></div><div class='line js-file-line' id='LC1383'><span class="pl-c">			text = &quot;[ &quot;..result.peer_id..&quot; ] added as owner&quot;</span></div><div class='line js-file-line' id='LC1384'><span class="pl-c">		end</span></div><div class='line js-file-line' id='LC1385'><span class="pl-c">		send_large_msg(receiver, text)</span></div><div class='line js-file-line' id='LC1386'><span class="pl-c">  end]]</span></div><div class='line js-file-line' id='LC1387'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>promote<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1388'>		<span class="pl-k">local</span> receiver <span class="pl-k">=</span> extra.<span class="pl-smi">channel</span></div><div class='line js-file-line' id='LC1389'>		<span class="pl-k">local</span> user_id <span class="pl-k">=</span> result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1390'>		<span class="pl-c">--local user = &quot;user#id&quot;..result.peer_id</span></div><div class='line js-file-line' id='LC1391'>		<span class="pl-c1">promote2</span>(receiver, member_username, user_id)</div><div class='line js-file-line' id='LC1392'>		<span class="pl-c">--channel_set_mod(receiver, user, ok_cb, false)</span></div><div class='line js-file-line' id='LC1393'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>demote<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1394'>		<span class="pl-k">local</span> receiver <span class="pl-k">=</span> extra.<span class="pl-smi">channel</span></div><div class='line js-file-line' id='LC1395'>		<span class="pl-k">local</span> user_id <span class="pl-k">=</span> result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1396'>		<span class="pl-k">local</span> user <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1397'>		<span class="pl-c1">demote2</span>(receiver, member_username, user_id)</div><div class='line js-file-line' id='LC1398'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>demoteadmin<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1399'>		<span class="pl-k">local</span> user_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1400'>		<span class="pl-k">local</span> channel_id <span class="pl-k">=</span> extra.<span class="pl-smi">channel</span></div><div class='line js-file-line' id='LC1401'>		<span class="pl-k">if</span> <span class="pl-c1">is_admin2</span>(result.<span class="pl-smi">peer_id</span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1402'>			<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>You can&#39;t demote global admins!<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1403'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1404'>		<span class="pl-c1">channel_demote</span>(channel_id, user_id, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1405'>		<span class="pl-k">if</span> result.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1406'>			text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">username</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been demoted from admin<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1407'>			<span class="pl-c1">send_large_msg</span>(channel_id, text)</div><div class='line js-file-line' id='LC1408'>		<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1409'>			text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>result.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been demoted from admin<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1410'>			<span class="pl-c1">send_large_msg</span>(channel_id, text)</div><div class='line js-file-line' id='LC1411'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1412'>		<span class="pl-k">local</span> receiver <span class="pl-k">=</span> extra.<span class="pl-smi">channel</span></div><div class='line js-file-line' id='LC1413'>		<span class="pl-k">local</span> user_id <span class="pl-k">=</span> result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1414'>		<span class="pl-c1">demote_admin</span>(receiver, member_username, user_id)</div><div class='line js-file-line' id='LC1415'>	<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>mute_user<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1416'>		<span class="pl-k">local</span> user_id <span class="pl-k">=</span> result.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1417'>		<span class="pl-k">local</span> receiver <span class="pl-k">=</span> extra.<span class="pl-smi">receiver</span></div><div class='line js-file-line' id='LC1418'>		<span class="pl-k">local</span> chat_id <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1419'>		<span class="pl-k">if</span> <span class="pl-c1">is_muted_user</span>(chat_id, user_id) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1420'>			<span class="pl-c1">unmute_user</span>(chat_id, user_id)</div><div class='line js-file-line' id='LC1421'>			<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] removed from muted user list<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1422'>		<span class="pl-k">elseif</span> <span class="pl-c1">is_owner</span>(extra.<span class="pl-smi">msg</span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1423'>			<span class="pl-c1">mute_user</span>(chat_id, user_id)</div><div class='line js-file-line' id='LC1424'>			<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] added to muted user list<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1425'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1426'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1427'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC1428'><span class="pl-c">--End resolve username actions</span></div><div class='line js-file-line' id='LC1429'><br></div><div class='line js-file-line' id='LC1430'><span class="pl-c">--Begin non-channel_invite username actions</span></div><div class='line js-file-line' id='LC1431'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">in_channel_cb</span>(<span class="pl-smi">cb_extra, success, result</span>)</div><div class='line js-file-line' id='LC1432'>&nbsp;&nbsp;<span class="pl-k">local</span> get_cmd <span class="pl-k">=</span> cb_extra.<span class="pl-smi">get_cmd</span></div><div class='line js-file-line' id='LC1433'>&nbsp;&nbsp;<span class="pl-k">local</span> receiver <span class="pl-k">=</span> cb_extra.<span class="pl-smi">receiver</span></div><div class='line js-file-line' id='LC1434'>&nbsp;&nbsp;<span class="pl-k">local</span> msg <span class="pl-k">=</span> cb_extra.<span class="pl-smi">msg</span></div><div class='line js-file-line' id='LC1435'>&nbsp;&nbsp;<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC1436'>&nbsp;&nbsp;<span class="pl-k">local</span> print_name <span class="pl-k">=</span> <span class="pl-c1">user_print_name</span>(cb_extra.<span class="pl-smi">msg</span>.<span class="pl-smi">from</span>):<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>‮<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1437'>&nbsp;&nbsp;<span class="pl-k">local</span> name_log <span class="pl-k">=</span> print_name:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>_<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1438'>&nbsp;&nbsp;<span class="pl-k">local</span> member <span class="pl-k">=</span> cb_extra.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC1439'>&nbsp;&nbsp;<span class="pl-k">local</span> memberid <span class="pl-k">=</span> cb_extra.<span class="pl-smi">user_id</span></div><div class='line js-file-line' id='LC1440'>&nbsp;&nbsp;<span class="pl-k">if</span> member <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1441'>&nbsp;&nbsp;&nbsp;&nbsp;text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>No user @<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>member<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span> in this SuperGroup.<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1442'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1443'>&nbsp;&nbsp;&nbsp;&nbsp;text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>No user [<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>memberid<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>] in this SuperGroup.<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1444'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1445'><span class="pl-k">if</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>channel_block<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1446'>&nbsp;&nbsp;<span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(result) <span class="pl-k">do</span></div><div class='line js-file-line' id='LC1447'>&nbsp;&nbsp;&nbsp;&nbsp;vusername <span class="pl-k">=</span> v.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC1448'>&nbsp;&nbsp;&nbsp;&nbsp;vpeer_id <span class="pl-k">=</span> <span class="pl-c1">tostring</span>(v.<span class="pl-smi">peer_id</span>)</div><div class='line js-file-line' id='LC1449'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> vusername <span class="pl-k">==</span> member <span class="pl-k">or</span> vpeer_id <span class="pl-k">==</span> memberid <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1450'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> user_id <span class="pl-k">=</span> v.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1451'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> channel_id <span class="pl-k">=</span> cb_extra.<span class="pl-smi">msg</span>.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC1452'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> sender <span class="pl-k">=</span> cb_extra.<span class="pl-smi">msg</span>.<span class="pl-smi">from</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC1453'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> user_id <span class="pl-k">==</span> sender <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1454'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>Leave using kickme command<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1455'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1456'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-c1">is_momod2</span>(user_id, channel_id) <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_admin2</span>(sender) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1457'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>You can&#39;t kick mods/owner/admins<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1458'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1459'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-c1">is_admin2</span>(user_id) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1460'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span> <span class="pl-c1">send_large_msg</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>channel_id, <span class="pl-s"><span class="pl-pds">&quot;</span>You can&#39;t kick other admins<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1461'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1462'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> v.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1463'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1464'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] kicked: @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">username</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>]<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1465'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1466'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1467'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] kicked: [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>]<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1468'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1469'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">kick_user</span>(user_id, channel_id)</div><div class='line js-file-line' id='LC1470'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1471'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1472'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1473'><span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>setadmin<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1474'>&nbsp;&nbsp;&nbsp;<span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(result) <span class="pl-k">do</span></div><div class='line js-file-line' id='LC1475'>&nbsp;&nbsp;&nbsp;&nbsp;vusername <span class="pl-k">=</span> v.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC1476'>&nbsp;&nbsp;&nbsp;&nbsp;vpeer_id <span class="pl-k">=</span> <span class="pl-c1">tostring</span>(v.<span class="pl-smi">peer_id</span>)</div><div class='line js-file-line' id='LC1477'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> vusername <span class="pl-k">==</span> member <span class="pl-k">or</span> vpeer_id <span class="pl-k">==</span> memberid <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1478'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> user_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1479'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> channel_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>cb_extra.<span class="pl-smi">msg</span>.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC1480'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">channel_set_admin</span>(channel_id, user_id, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1481'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">if</span> v.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1482'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">username</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] has been set as an admin<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1483'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set admin @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">username</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>]<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1484'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1485'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>[<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] has been set as an admin<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1486'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set admin <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span>)</div><div class='line js-file-line' id='LC1487'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1488'>	  <span class="pl-k">if</span> v.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1489'>		member_username <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC1490'>	  <span class="pl-k">else</span></div><div class='line js-file-line' id='LC1491'>		member_username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(v.<span class="pl-smi">print_name</span>, <span class="pl-s"><span class="pl-pds">&#39;</span>_<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span> <span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1492'>	  <span class="pl-k">end</span></div><div class='line js-file-line' id='LC1493'>		<span class="pl-k">local</span> receiver <span class="pl-k">=</span> channel_id</div><div class='line js-file-line' id='LC1494'>		<span class="pl-k">local</span> user_id <span class="pl-k">=</span> v.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1495'>		<span class="pl-c1">promote_admin</span>(receiver, member_username, user_id)</div><div class='line js-file-line' id='LC1496'><br></div><div class='line js-file-line' id='LC1497'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1498'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">send_large_msg</span>(channel_id, text)</div><div class='line js-file-line' id='LC1499'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1500'>&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1501'>&nbsp;<span class="pl-k">elseif</span> get_cmd <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setowner<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1502'>	<span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(result) <span class="pl-k">do</span></div><div class='line js-file-line' id='LC1503'>		vusername <span class="pl-k">=</span> v.<span class="pl-smi">username</span></div><div class='line js-file-line' id='LC1504'>		vpeer_id <span class="pl-k">=</span> <span class="pl-c1">tostring</span>(v.<span class="pl-smi">peer_id</span>)</div><div class='line js-file-line' id='LC1505'>		<span class="pl-k">if</span> vusername <span class="pl-k">==</span> member <span class="pl-k">or</span> vpeer_id <span class="pl-k">==</span> memberid <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1506'>			<span class="pl-k">local</span> channel <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1507'>			<span class="pl-k">local</span> from_id <span class="pl-k">=</span> cb_extra.<span class="pl-smi">msg</span>.<span class="pl-smi">from</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC1508'>			<span class="pl-k">local</span> group_owner <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(channel)][<span class="pl-s"><span class="pl-pds">&#39;</span>set_owner<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC1509'>			<span class="pl-k">if</span> group_owner <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1510'>				<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_admin2</span>(<span class="pl-c1">tonumber</span>(group_owner)) <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_support</span>(<span class="pl-c1">tonumber</span>(group_owner)) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1511'>					<span class="pl-k">local</span> user <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>group_owner</div><div class='line js-file-line' id='LC1512'>					<span class="pl-c1">channel_demote</span>(receiver, user, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1513'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1514'>					<span class="pl-k">local</span> user_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1515'>					<span class="pl-c1">channel_set_admin</span>(receiver, user_id, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1516'>					data[<span class="pl-c1">tostring</span>(channel)][<span class="pl-s"><span class="pl-pds">&#39;</span>set_owner<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-c1">tostring</span>(v.<span class="pl-smi">peer_id</span>)</div><div class='line js-file-line' id='LC1517'>					<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC1518'>					<span class="pl-c1">savelog</span>(channel, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>[<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>from_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] as owner by username<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1519'>				<span class="pl-k">if</span> result.<span class="pl-smi">username</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1520'>					text <span class="pl-k">=</span> member_username<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] added as owner<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1521'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1522'>					text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>[<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>v.<span class="pl-smi">peer_id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] added as owner<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1523'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1524'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1525'>		<span class="pl-k">elseif</span> memberid <span class="pl-k">and</span> vusername <span class="pl-k">~=</span> member <span class="pl-k">and</span> vpeer_id <span class="pl-k">~=</span> memberid <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1526'>			<span class="pl-k">local</span> channel <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>channel#id<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1527'>			<span class="pl-k">local</span> from_id <span class="pl-k">=</span> cb_extra.<span class="pl-smi">msg</span>.<span class="pl-smi">from</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC1528'>			<span class="pl-k">local</span> group_owner <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(channel)][<span class="pl-s"><span class="pl-pds">&#39;</span>set_owner<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC1529'>			<span class="pl-k">if</span> group_owner <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1530'>				<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_admin2</span>(<span class="pl-c1">tonumber</span>(group_owner)) <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_support</span>(<span class="pl-c1">tonumber</span>(group_owner)) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1531'>					<span class="pl-k">local</span> user <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>group_owner</div><div class='line js-file-line' id='LC1532'>					<span class="pl-c1">channel_demote</span>(receiver, user, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1533'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1534'>				data[<span class="pl-c1">tostring</span>(channel)][<span class="pl-s"><span class="pl-pds">&#39;</span>set_owner<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-c1">tostring</span>(memberid)</div><div class='line js-file-line' id='LC1535'>				<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC1536'>				<span class="pl-c1">savelog</span>(channel, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>[<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>from_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>memberid<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] as owner by username<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1537'>				text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>[<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>memberid<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] added as owner<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1538'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1539'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1540'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1541'>&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1542'><span class="pl-c1">send_large_msg</span>(receiver, text)</div><div class='line js-file-line' id='LC1543'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC1544'><span class="pl-c">--End non-channel_invite username actions</span></div><div class='line js-file-line' id='LC1545'><br></div><div class='line js-file-line' id='LC1546'><span class="pl-c">--&#39;Set supergroup photo&#39; function</span></div><div class='line js-file-line' id='LC1547'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">set_supergroup_photo</span>(<span class="pl-smi">msg, success, result</span>)</div><div class='line js-file-line' id='LC1548'>&nbsp;&nbsp;<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC1549'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1550'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1551'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1552'>&nbsp;&nbsp;<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC1553'>&nbsp;&nbsp;<span class="pl-k">if</span> success <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1554'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">local</span> file <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>data/photos/channel_photo_<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>.jpg<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1555'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>File downloaded to:<span class="pl-pds">&#39;</span></span>, result)</div><div class='line js-file-line' id='LC1556'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">os.rename</span>(result, file)</div><div class='line js-file-line' id='LC1557'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>File moved to:<span class="pl-pds">&#39;</span></span>, file)</div><div class='line js-file-line' id='LC1558'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">channel_set_photo</span>(receiver, file, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1559'>&nbsp;&nbsp;&nbsp;&nbsp;data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>set_photo<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> file</div><div class='line js-file-line' id='LC1560'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC1561'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>Photo saved!<span class="pl-pds">&#39;</span></span>, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1562'>&nbsp;&nbsp;<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1563'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">&#39;</span>Error downloading: <span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">id</span>)</div><div class='line js-file-line' id='LC1564'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>Failed, please try again!<span class="pl-pds">&#39;</span></span>, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1565'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1566'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC1567'><br></div><div class='line js-file-line' id='LC1568'><span class="pl-c">--Run function</span></div><div class='line js-file-line' id='LC1569'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">run</span>(<span class="pl-smi">msg, matches</span>)</div><div class='line js-file-line' id='LC1570'>	<span class="pl-k">if</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">type</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1571'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>tosuper<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1572'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_admin1</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1573'>				<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1574'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1575'>			<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC1576'>			<span class="pl-c1">chat_upgrade</span>(receiver, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1577'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1578'>	<span class="pl-k">elseif</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">type</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel<span class="pl-pds">&#39;</span></span><span class="pl-k">then</span></div><div class='line js-file-line' id='LC1579'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>tosuper<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1580'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_admin1</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1581'>				<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1582'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1583'>			<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Already a SuperGroup<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1584'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1585'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1586'>	<span class="pl-k">if</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">type</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1587'>	<span class="pl-k">local</span> support_id <span class="pl-k">=</span> msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC1588'>	<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC1589'>	<span class="pl-k">local</span> print_name <span class="pl-k">=</span> <span class="pl-c1">user_print_name</span>(msg.<span class="pl-smi">from</span>):<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>‮<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1590'>	<span class="pl-k">local</span> name_log <span class="pl-k">=</span> print_name:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>_<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1591'>	<span class="pl-k">local</span> data <span class="pl-k">=</span> <span class="pl-c1">load_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>)</div><div class='line js-file-line' id='LC1592'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>add<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-k">not</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1593'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_admin1</span>(msg) <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_support</span>(support_id) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1594'>				<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1595'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1596'>			<span class="pl-k">if</span> <span class="pl-c1">is_super_group</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1597'>				<span class="pl-k">return</span> <span class="pl-c1">reply_msg</span>(msg.<span class="pl-smi">id</span>, <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup is already added.<span class="pl-pds">&#39;</span></span>, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1598'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1599'>			<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>SuperGroup <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">to</span>.<span class="pl-smi">print_name</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>(<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>) added<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1600'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] added SuperGroup<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1601'>			<span class="pl-c1">superadd</span>(msg)</div><div class='line js-file-line' id='LC1602'>			<span class="pl-c1">set_mutes</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)</div><div class='line js-file-line' id='LC1603'>			<span class="pl-c1">channel_set_admin</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>user#id<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span>, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1604'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1605'><br></div><div class='line js-file-line' id='LC1606'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>rem<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_admin1</span>(msg) <span class="pl-k">and</span> <span class="pl-k">not</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1607'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_super_group</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1608'>				<span class="pl-k">return</span> <span class="pl-c1">reply_msg</span>(msg.<span class="pl-smi">id</span>, <span class="pl-s"><span class="pl-pds">&#39;</span>SuperGroup is not added.<span class="pl-pds">&#39;</span></span>, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1609'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1610'>			<span class="pl-c1">print</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>SuperGroup <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">to</span>.<span class="pl-smi">print_name</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>(<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>) removed<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1611'>			<span class="pl-c1">superrem</span>(msg)</div><div class='line js-file-line' id='LC1612'>			<span class="pl-c1">rem_mutes</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)</div><div class='line js-file-line' id='LC1613'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1614'><br></div><div class='line js-file-line' id='LC1615'>		<span class="pl-k">if</span> <span class="pl-k">not</span> data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1616'>			<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1617'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1618'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>gpinfo<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1619'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1620'>				<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1621'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1622'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested SuperGroup info<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1623'>			<span class="pl-c1">channel_info</span>(receiver, callback_info, {receiver <span class="pl-k">=</span> receiver, msg <span class="pl-k">=</span> msg})</div><div class='line js-file-line' id='LC1624'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1625'><br></div><div class='line js-file-line' id='LC1626'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>admins<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1627'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_support</span>(msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1628'>				<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1629'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1630'>			member_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Admins<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1631'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested SuperGroup Admins list<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1632'>			admins <span class="pl-k">=</span> <span class="pl-c1">channel_get_admins</span>(receiver,callback, {receiver <span class="pl-k">=</span> receiver, msg <span class="pl-k">=</span> msg, member_type <span class="pl-k">=</span> member_type})</div><div class='line js-file-line' id='LC1633'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1634'><br></div><div class='line js-file-line' id='LC1635'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>owner<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1636'>			<span class="pl-k">local</span> group_owner <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>set_owner<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC1637'>			<span class="pl-k">if</span> <span class="pl-k">not</span> group_owner <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1638'>				<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>no owner,ask admins in support groups to set owner for your SuperGroup<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1639'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1640'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] used /owner<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1641'>			<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>SuperGroup owner is [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>group_owner<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>]<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1642'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1643'><br></div><div class='line js-file-line' id='LC1644'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>modlist<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1645'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested group modlist<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1646'>			<span class="pl-k">return</span> <span class="pl-c1">modlist</span>(msg)</div><div class='line js-file-line' id='LC1647'>			<span class="pl-c">-- channel_get_admins(receiver,callback, {receiver = receiver})</span></div><div class='line js-file-line' id='LC1648'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1649'><br></div><div class='line js-file-line' id='LC1650'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>bots<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1651'>			member_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Bots<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1652'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested SuperGroup bots list<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1653'>			<span class="pl-c1">channel_get_bots</span>(receiver, callback, {receiver <span class="pl-k">=</span> receiver, msg <span class="pl-k">=</span> msg, member_type <span class="pl-k">=</span> member_type})</div><div class='line js-file-line' id='LC1654'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1655'><br></div><div class='line js-file-line' id='LC1656'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>who<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-k">not</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1657'>			<span class="pl-k">local</span> user_id <span class="pl-k">=</span> msg.<span class="pl-smi">from</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC1658'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested SuperGroup users list<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1659'>			<span class="pl-c1">channel_get_users</span>(receiver, callback_who, {receiver <span class="pl-k">=</span> receiver})</div><div class='line js-file-line' id='LC1660'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1661'><br></div><div class='line js-file-line' id='LC1662'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>kicked<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1663'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested Kicked users list<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1664'>			<span class="pl-c1">channel_get_kicked</span>(receiver, callback_kicked, {receiver <span class="pl-k">=</span> receiver})</div><div class='line js-file-line' id='LC1665'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1666'><br></div><div class='line js-file-line' id='LC1667'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>del<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1668'>			<span class="pl-k">if</span> <span class="pl-c1">type</span>(msg.<span class="pl-smi">reply_id</span>) <span class="pl-k">~=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>nil<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1669'>				<span class="pl-k">local</span> cbreply_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1670'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>del<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC1671'>					msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1672'>				}</div><div class='line js-file-line' id='LC1673'>				<span class="pl-c1">delete_msg</span>(msg.<span class="pl-smi">id</span>, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1674'>				<span class="pl-c1">get_message</span>(msg.<span class="pl-smi">reply_id</span>, get_message_callback, cbreply_extra)</div><div class='line js-file-line' id='LC1675'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1676'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1677'><br></div><div class='line js-file-line' id='LC1678'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>block<span class="pl-pds">&#39;</span></span> <span class="pl-k">or</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>kick<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1679'>			<span class="pl-k">if</span> <span class="pl-c1">type</span>(msg.<span class="pl-smi">reply_id</span>) <span class="pl-k">~=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>nil<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1680'>				<span class="pl-k">local</span> cbreply_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1681'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel_block<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC1682'>					msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1683'>				}</div><div class='line js-file-line' id='LC1684'>				<span class="pl-c1">get_message</span>(msg.<span class="pl-smi">reply_id</span>, get_message_callback, cbreply_extra)</div><div class='line js-file-line' id='LC1685'>			<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>block<span class="pl-pds">&#39;</span></span> <span class="pl-k">or</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>kick<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1686'>				<span class="pl-c">--[[local user_id = matches[2]</span></div><div class='line js-file-line' id='LC1687'><span class="pl-c">				local channel_id = msg.to.id</span></div><div class='line js-file-line' id='LC1688'><span class="pl-c">				if is_momod2(user_id, channel_id) and not is_admin2(user_id) then</span></div><div class='line js-file-line' id='LC1689'><span class="pl-c">					return send_large_msg(receiver, &quot;You can&#39;t kick mods/owner/admins&quot;)</span></div><div class='line js-file-line' id='LC1690'><span class="pl-c">				end</span></div><div class='line js-file-line' id='LC1691'><span class="pl-c">				savelog(msg.to.id, name_log..&quot; [&quot;..msg.from.id..&quot;] kicked: [ user#id&quot;..user_id..&quot; ]&quot;)</span></div><div class='line js-file-line' id='LC1692'><span class="pl-c">				kick_user(user_id, channel_id)]]</span></div><div class='line js-file-line' id='LC1693'>				<span class="pl-k">local</span>	get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel_block<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1694'>				<span class="pl-k">local</span>	msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1695'>				<span class="pl-k">local</span> user_id <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1696'>				<span class="pl-c1">channel_get_users</span> (receiver, in_channel_cb, {get_cmd<span class="pl-k">=</span>get_cmd, receiver<span class="pl-k">=</span>receiver, msg<span class="pl-k">=</span>msg, user_id<span class="pl-k">=</span>user_id})</div><div class='line js-file-line' id='LC1697'>			<span class="pl-k">elseif</span> msg.<span class="pl-smi">text</span>:<span class="pl-c1">match</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>@[%a%d]<span class="pl-pds">&quot;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1698'>			<span class="pl-c">--[[local cbres_extra = {</span></div><div class='line js-file-line' id='LC1699'><span class="pl-c">					channelid = msg.to.id,</span></div><div class='line js-file-line' id='LC1700'><span class="pl-c">					get_cmd = &#39;channel_block&#39;,</span></div><div class='line js-file-line' id='LC1701'><span class="pl-c">					sender = msg.from.id</span></div><div class='line js-file-line' id='LC1702'><span class="pl-c">				}</span></div><div class='line js-file-line' id='LC1703'><span class="pl-c">			    local username = matches[2]</span></div><div class='line js-file-line' id='LC1704'><span class="pl-c">				local username = string.gsub(matches[2], &#39;@&#39;, &#39;&#39;)</span></div><div class='line js-file-line' id='LC1705'><span class="pl-c">				savelog(msg.to.id, name_log..&quot; [&quot;..msg.from.id..&quot;] kicked: @&quot;..username)</span></div><div class='line js-file-line' id='LC1706'><span class="pl-c">				resolve_username(username, callbackres, cbres_extra)]]</span></div><div class='line js-file-line' id='LC1707'>			<span class="pl-k">local</span> get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel_block<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1708'>			<span class="pl-k">local</span> msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1709'>			<span class="pl-k">local</span> username <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1710'>			<span class="pl-k">local</span> username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>@<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1711'>			<span class="pl-c1">channel_get_users</span> (receiver, in_channel_cb, {get_cmd<span class="pl-k">=</span>get_cmd, receiver<span class="pl-k">=</span>receiver, msg<span class="pl-k">=</span>msg, username<span class="pl-k">=</span>username})</div><div class='line js-file-line' id='LC1712'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1713'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1714'><br></div><div class='line js-file-line' id='LC1715'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>id<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1716'>			<span class="pl-k">if</span> <span class="pl-c1">type</span>(msg.<span class="pl-smi">reply_id</span>) <span class="pl-k">~=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>nil<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">and</span> <span class="pl-k">not</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1717'>				<span class="pl-k">local</span> cbreply_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1718'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>id<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC1719'>					msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1720'>				}</div><div class='line js-file-line' id='LC1721'>				<span class="pl-c1">get_message</span>(msg.<span class="pl-smi">reply_id</span>, get_message_callback, cbreply_extra)</div><div class='line js-file-line' id='LC1722'>			<span class="pl-k">elseif</span> <span class="pl-c1">type</span>(msg.<span class="pl-smi">reply_id</span>) <span class="pl-k">~=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>nil<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>from<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1723'>				<span class="pl-k">local</span> cbreply_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1724'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>idfrom<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC1725'>					msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1726'>				}</div><div class='line js-file-line' id='LC1727'>				<span class="pl-c1">get_message</span>(msg.<span class="pl-smi">reply_id</span>, get_message_callback, cbreply_extra)</div><div class='line js-file-line' id='LC1728'>			<span class="pl-k">elseif</span> msg.<span class="pl-smi">text</span>:<span class="pl-c1">match</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>@[%a%d]<span class="pl-pds">&quot;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1729'>				<span class="pl-k">local</span> cbres_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1730'>					channelid <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>,</div><div class='line js-file-line' id='LC1731'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>id<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1732'>				}</div><div class='line js-file-line' id='LC1733'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1734'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> username:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span>,<span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1735'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested ID for: @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>username)</div><div class='line js-file-line' id='LC1736'>				<span class="pl-c1">resolve_username</span>(username,  callbackres, cbres_extra)</div><div class='line js-file-line' id='LC1737'>			<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1738'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested SuperGroup ID<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1739'>				<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>&gt;Your Name: <span class="pl-pds">&quot;</span></span> <span class="pl-k">..</span><span class="pl-c1">string.gsub</span>(msg.<span class="pl-smi">from</span>.<span class="pl-smi">print_name</span>, <span class="pl-s"><span class="pl-pds">&quot;</span>_<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)<span class="pl-k">..</span> <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-cce">\n</span>&gt;Your Username: @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>(msg.<span class="pl-smi">from</span>.<span class="pl-smi">username</span> <span class="pl-k">or</span> <span class="pl-s"><span class="pl-pds">&#39;</span>----<span class="pl-pds">&#39;</span></span>)<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-cce">\n</span>&gt;Your ID: <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-cce">\n\n</span>&gt;SuperGroup Name: <span class="pl-pds">&quot;</span></span> <span class="pl-k">..</span><span class="pl-c1">string.gsub</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">print_name</span>, <span class="pl-s"><span class="pl-pds">&quot;</span>_<span class="pl-pds">&quot;</span></span>, <span class="pl-s"><span class="pl-pds">&quot;</span> <span class="pl-pds">&quot;</span></span>)<span class="pl-k">..</span> <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-cce">\n</span>&gt;SuperGroup ID: <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC1740'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1741'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1742'><br></div><div class='line js-file-line' id='LC1743'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>kickme<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1744'>			<span class="pl-k">if</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">type</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>channel<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1745'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] left via kickme<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1746'>				<span class="pl-c1">channel_kick</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>channel#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span>, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1747'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1748'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1749'><br></div><div class='line js-file-line' id='LC1750'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>newlink<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg)<span class="pl-k">then</span></div><div class='line js-file-line' id='LC1751'>			<span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">callback_link</span> (<span class="pl-smi">extra , success, result</span>)</div><div class='line js-file-line' id='LC1752'>			<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC1753'>				<span class="pl-k">if</span> success <span class="pl-k">==</span> <span class="pl-c1">0</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1754'>					<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&#39;</span>*Error: Failed to retrieve link* <span class="pl-cce">\n</span>Reason: Not creator.<span class="pl-cce">\n\n</span>If you have the link, please use /setlink to set it<span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1755'>					data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>set_link<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-c1">nil</span></div><div class='line js-file-line' id='LC1756'>					<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC1757'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC1758'>					<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&quot;</span>Created a new link<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1759'>					data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>set_link<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> result</div><div class='line js-file-line' id='LC1760'>					<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC1761'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1762'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1763'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] attempted to create a new SuperGroup link<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1764'>			<span class="pl-c1">export_channel_link</span>(receiver, callback_link, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1765'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1766'><br></div><div class='line js-file-line' id='LC1767'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setlink<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1768'>			data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>set_link<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>waiting<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1769'>			<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC1770'>			<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Please send the new group link now<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1771'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1772'><br></div><div class='line js-file-line' id='LC1773'>		<span class="pl-k">if</span> msg.<span class="pl-smi">text</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1774'>			<span class="pl-k">if</span> msg.<span class="pl-smi">text</span>:<span class="pl-c1">match</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>^(https://telegram.me/joinchat/%S+)$<span class="pl-pds">&quot;</span></span>) <span class="pl-k">and</span> data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>set_link<span class="pl-pds">&#39;</span></span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>waiting<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1775'>				data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>set_link<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> msg.<span class="pl-smi">text</span></div><div class='line js-file-line' id='LC1776'>				<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC1777'>				<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>New link set<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1778'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1779'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1780'><br></div><div class='line js-file-line' id='LC1781'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>link<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1782'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1783'>				<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1784'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1785'>			<span class="pl-k">local</span> group_link <span class="pl-k">=</span> data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>set_link<span class="pl-pds">&#39;</span></span>]</div><div class='line js-file-line' id='LC1786'>			<span class="pl-k">if</span> <span class="pl-k">not</span> group_link <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1787'>				<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Create a link using /newlink first!<span class="pl-cce">\n\n</span>Or if I am not creator use /setlink to set your link<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1788'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1789'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested group link [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>group_link<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>]<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1790'>			<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Group link:<span class="pl-cce">\n</span><span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>group_link</div><div class='line js-file-line' id='LC1791'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1792'><br></div><div class='line js-file-line' id='LC1793'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>invite<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_sudo</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1794'>			<span class="pl-k">local</span> cbres_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1795'>				channel <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg),</div><div class='line js-file-line' id='LC1796'>				get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>invite<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1797'>			}</div><div class='line js-file-line' id='LC1798'>			<span class="pl-k">local</span> username <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1799'>			<span class="pl-k">local</span> username <span class="pl-k">=</span> username:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span>,<span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1800'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] invited @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>username)</div><div class='line js-file-line' id='LC1801'>			<span class="pl-c1">resolve_username</span>(username,  callbackres, cbres_extra)</div><div class='line js-file-line' id='LC1802'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1803'><br></div><div class='line js-file-line' id='LC1804'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>res<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1805'>			<span class="pl-k">local</span> cbres_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1806'>				channelid <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>,</div><div class='line js-file-line' id='LC1807'>				get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>res<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1808'>			}</div><div class='line js-file-line' id='LC1809'>			<span class="pl-k">local</span> username <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1810'>			<span class="pl-k">local</span> username <span class="pl-k">=</span> username:<span class="pl-c1">gsub</span>(<span class="pl-s"><span class="pl-pds">&quot;</span>@<span class="pl-pds">&quot;</span></span>,<span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC1811'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] resolved username: @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>username)</div><div class='line js-file-line' id='LC1812'>			<span class="pl-c1">resolve_username</span>(username,  callbackres, cbres_extra)</div><div class='line js-file-line' id='LC1813'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1814'><br></div><div class='line js-file-line' id='LC1815'>		<span class="pl-c">--[[if matches[1] == &#39;kick&#39; and is_momod(msg) then</span></div><div class='line js-file-line' id='LC1816'><span class="pl-c">			local receiver = channel..matches[3]</span></div><div class='line js-file-line' id='LC1817'><span class="pl-c">			local user = &quot;user#id&quot;..matches[2]</span></div><div class='line js-file-line' id='LC1818'><span class="pl-c">			chaannel_kick(receiver, user, ok_cb, false)</span></div><div class='line js-file-line' id='LC1819'><span class="pl-c">		end]]</span></div><div class='line js-file-line' id='LC1820'><br></div><div class='line js-file-line' id='LC1821'>			<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setadmin<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1822'>				<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_support</span>(msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span>) <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1823'>					<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1824'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1825'>			<span class="pl-k">if</span> <span class="pl-c1">type</span>(msg.<span class="pl-smi">reply_id</span>) <span class="pl-k">~=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>nil<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1826'>				<span class="pl-k">local</span> cbreply_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1827'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setadmin<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC1828'>					msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1829'>				}</div><div class='line js-file-line' id='LC1830'>				setadmin <span class="pl-k">=</span> <span class="pl-c1">get_message</span>(msg.<span class="pl-smi">reply_id</span>, get_message_callback, cbreply_extra)</div><div class='line js-file-line' id='LC1831'>			<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setadmin<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1832'>			<span class="pl-c">--[[]	local receiver = get_receiver(msg)</span></div><div class='line js-file-line' id='LC1833'><span class="pl-c">				local user_id = &quot;user#id&quot;..matches[2]</span></div><div class='line js-file-line' id='LC1834'><span class="pl-c">				local get_cmd = &#39;setadmin&#39;</span></div><div class='line js-file-line' id='LC1835'><span class="pl-c">				user_info(user_id, cb_user_info, {receiver = receiver, get_cmd = get_cmd})]]</span></div><div class='line js-file-line' id='LC1836'>				<span class="pl-k">local</span>	get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setadmin<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1837'>				<span class="pl-k">local</span>	msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1838'>				<span class="pl-k">local</span> user_id <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1839'>				<span class="pl-c1">channel_get_users</span> (receiver, in_channel_cb, {get_cmd<span class="pl-k">=</span>get_cmd, receiver<span class="pl-k">=</span>receiver, msg<span class="pl-k">=</span>msg, user_id<span class="pl-k">=</span>user_id})</div><div class='line js-file-line' id='LC1840'>			<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setadmin<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1841'>				<span class="pl-c">--[[local cbres_extra = {</span></div><div class='line js-file-line' id='LC1842'><span class="pl-c">					channel = get_receiver(msg),</span></div><div class='line js-file-line' id='LC1843'><span class="pl-c">					get_cmd = &#39;setadmin&#39;</span></div><div class='line js-file-line' id='LC1844'><span class="pl-c">				}</span></div><div class='line js-file-line' id='LC1845'><span class="pl-c">				local username = matches[2]</span></div><div class='line js-file-line' id='LC1846'><span class="pl-c">				local username = string.gsub(matches[2], &#39;@&#39;, &#39;&#39;)</span></div><div class='line js-file-line' id='LC1847'><span class="pl-c">				savelog(msg.to.id, name_log..&quot; [&quot;..msg.from.id..&quot;] set admin @&quot;..username)</span></div><div class='line js-file-line' id='LC1848'><span class="pl-c">				resolve_username(username, callbackres, cbres_extra)]]</span></div><div class='line js-file-line' id='LC1849'>				<span class="pl-k">local</span>	get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setadmin<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1850'>				<span class="pl-k">local</span>	msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1851'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1852'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>@<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1853'>				<span class="pl-c1">channel_get_users</span> (receiver, in_channel_cb, {get_cmd<span class="pl-k">=</span>get_cmd, receiver<span class="pl-k">=</span>receiver, msg<span class="pl-k">=</span>msg, username<span class="pl-k">=</span>username})</div><div class='line js-file-line' id='LC1854'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1855'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1856'><br></div><div class='line js-file-line' id='LC1857'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>demoteadmin<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1858'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_support</span>(msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span>) <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1859'>				<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1860'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1861'>			<span class="pl-k">if</span> <span class="pl-c1">type</span>(msg.<span class="pl-smi">reply_id</span>) <span class="pl-k">~=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>nil<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1862'>				<span class="pl-k">local</span> cbreply_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1863'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>demoteadmin<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC1864'>					msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1865'>				}</div><div class='line js-file-line' id='LC1866'>				demoteadmin <span class="pl-k">=</span> <span class="pl-c1">get_message</span>(msg.<span class="pl-smi">reply_id</span>, get_message_callback, cbreply_extra)</div><div class='line js-file-line' id='LC1867'>			<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>demoteadmin<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1868'>				<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC1869'>				<span class="pl-k">local</span> user_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1870'>				<span class="pl-k">local</span> get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>demoteadmin<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1871'>				<span class="pl-c1">user_info</span>(user_id, cb_user_info, {receiver <span class="pl-k">=</span> receiver, get_cmd <span class="pl-k">=</span> get_cmd})</div><div class='line js-file-line' id='LC1872'>			<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>demoteadmin<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1873'>				<span class="pl-k">local</span> cbres_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1874'>					channel <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg),</div><div class='line js-file-line' id='LC1875'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>demoteadmin<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1876'>				}</div><div class='line js-file-line' id='LC1877'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1878'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>@<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1879'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] demoted admin @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>username)</div><div class='line js-file-line' id='LC1880'>				<span class="pl-c1">resolve_username</span>(username, callbackres, cbres_extra)</div><div class='line js-file-line' id='LC1881'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1882'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1883'><br></div><div class='line js-file-line' id='LC1884'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setowner<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1885'>			<span class="pl-k">if</span> <span class="pl-c1">type</span>(msg.<span class="pl-smi">reply_id</span>) <span class="pl-k">~=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>nil<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1886'>				<span class="pl-k">local</span> cbreply_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1887'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setowner<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC1888'>					msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1889'>				}</div><div class='line js-file-line' id='LC1890'>				setowner <span class="pl-k">=</span> <span class="pl-c1">get_message</span>(msg.<span class="pl-smi">reply_id</span>, get_message_callback, cbreply_extra)</div><div class='line js-file-line' id='LC1891'>			<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setowner<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1892'>		<span class="pl-c">--[[	local group_owner = data[tostring(msg.to.id)][&#39;set_owner&#39;]</span></div><div class='line js-file-line' id='LC1893'><span class="pl-c">				if group_owner then</span></div><div class='line js-file-line' id='LC1894'><span class="pl-c">					local receiver = get_receiver(msg)</span></div><div class='line js-file-line' id='LC1895'><span class="pl-c">					local user_id = &quot;user#id&quot;..group_owner</span></div><div class='line js-file-line' id='LC1896'><span class="pl-c">					if not is_admin2(group_owner) and not is_support(group_owner) then</span></div><div class='line js-file-line' id='LC1897'><span class="pl-c">						channel_demote(receiver, user_id, ok_cb, false)</span></div><div class='line js-file-line' id='LC1898'><span class="pl-c">					end</span></div><div class='line js-file-line' id='LC1899'><span class="pl-c">					local user = &quot;user#id&quot;..matches[2]</span></div><div class='line js-file-line' id='LC1900'><span class="pl-c">					channel_set_admin(receiver, user, ok_cb, false)</span></div><div class='line js-file-line' id='LC1901'><span class="pl-c">					data[tostring(msg.to.id)][&#39;set_owner&#39;] = tostring(matches[2])</span></div><div class='line js-file-line' id='LC1902'><span class="pl-c">					save_data(_config.moderation.data, data)</span></div><div class='line js-file-line' id='LC1903'><span class="pl-c">					savelog(msg.to.id, name_log..&quot; [&quot;..msg.from.id..&quot;] set [&quot;..matches[2]..&quot;] as owner&quot;)</span></div><div class='line js-file-line' id='LC1904'><span class="pl-c">					local text = &quot;[ &quot;..matches[2]..&quot; ] added as owner&quot;</span></div><div class='line js-file-line' id='LC1905'><span class="pl-c">					return text</span></div><div class='line js-file-line' id='LC1906'><span class="pl-c">				end]]</span></div><div class='line js-file-line' id='LC1907'>				<span class="pl-k">local</span>	get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setowner<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1908'>				<span class="pl-k">local</span>	msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1909'>				<span class="pl-k">local</span> user_id <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1910'>				<span class="pl-c1">channel_get_users</span> (receiver, in_channel_cb, {get_cmd<span class="pl-k">=</span>get_cmd, receiver<span class="pl-k">=</span>receiver, msg<span class="pl-k">=</span>msg, user_id<span class="pl-k">=</span>user_id})</div><div class='line js-file-line' id='LC1911'>			<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setowner<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1912'>				<span class="pl-k">local</span>	get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setowner<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1913'>				<span class="pl-k">local</span>	msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1914'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1915'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>@<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1916'>				<span class="pl-c1">channel_get_users</span> (receiver, in_channel_cb, {get_cmd<span class="pl-k">=</span>get_cmd, receiver<span class="pl-k">=</span>receiver, msg<span class="pl-k">=</span>msg, username<span class="pl-k">=</span>username})</div><div class='line js-file-line' id='LC1917'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1918'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1919'><br></div><div class='line js-file-line' id='LC1920'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>promote<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1921'>		  <span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1922'>				<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1923'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1924'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1925'>				<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Only owner/admin can promote<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1926'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1927'>			<span class="pl-k">if</span> <span class="pl-c1">type</span>(msg.<span class="pl-smi">reply_id</span>) <span class="pl-k">~=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>nil<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1928'>				<span class="pl-k">local</span> cbreply_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1929'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>promote<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC1930'>					msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1931'>				}</div><div class='line js-file-line' id='LC1932'>				promote <span class="pl-k">=</span> <span class="pl-c1">get_message</span>(msg.<span class="pl-smi">reply_id</span>, get_message_callback, cbreply_extra)</div><div class='line js-file-line' id='LC1933'>			<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>promote<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1934'>				<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC1935'>				<span class="pl-k">local</span> user_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1936'>				<span class="pl-k">local</span> get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>promote<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1937'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] promoted user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>matches[<span class="pl-c1">2</span>])</div><div class='line js-file-line' id='LC1938'>				<span class="pl-c1">user_info</span>(user_id, cb_user_info, {receiver <span class="pl-k">=</span> receiver, get_cmd <span class="pl-k">=</span> get_cmd})</div><div class='line js-file-line' id='LC1939'>			<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>promote<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1940'>				<span class="pl-k">local</span> cbres_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1941'>					channel <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg),</div><div class='line js-file-line' id='LC1942'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>promote<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC1943'>				}</div><div class='line js-file-line' id='LC1944'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1945'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>@<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1946'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] promoted @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>username)</div><div class='line js-file-line' id='LC1947'>				<span class="pl-k">return</span> <span class="pl-c1">resolve_username</span>(username, callbackres, cbres_extra)</div><div class='line js-file-line' id='LC1948'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1949'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1950'><br></div><div class='line js-file-line' id='LC1951'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>mp<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_sudo</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1952'>			channel <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC1953'>			user_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>user#id<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1954'>			<span class="pl-c1">channel_set_mod</span>(channel, user_id, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1955'>			<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>ok<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1956'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1957'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>md<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_sudo</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1958'>			channel <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC1959'>			user_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>user#id<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1960'>			<span class="pl-c1">channel_demote</span>(channel, user_id, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC1961'>			<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>ok<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1962'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1963'><br></div><div class='line js-file-line' id='LC1964'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>demote<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1965'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1966'>				<span class="pl-k">return</span></div><div class='line js-file-line' id='LC1967'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1968'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1969'>				<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Only owner/support/admin can promote<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC1970'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1971'>			<span class="pl-k">if</span> <span class="pl-c1">type</span>(msg.<span class="pl-smi">reply_id</span>) <span class="pl-k">~=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>nil<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1972'>				<span class="pl-k">local</span> cbreply_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1973'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>demote<span class="pl-pds">&#39;</span></span>,</div><div class='line js-file-line' id='LC1974'>					msg <span class="pl-k">=</span> msg</div><div class='line js-file-line' id='LC1975'>				}</div><div class='line js-file-line' id='LC1976'>				demote <span class="pl-k">=</span> <span class="pl-c1">get_message</span>(msg.<span class="pl-smi">reply_id</span>, get_message_callback, cbreply_extra)</div><div class='line js-file-line' id='LC1977'>			<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>demote<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1978'>				<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC1979'>				<span class="pl-k">local</span> user_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1980'>				<span class="pl-k">local</span> get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>demote<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1981'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] demoted user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>matches[<span class="pl-c1">2</span>])</div><div class='line js-file-line' id='LC1982'>				<span class="pl-c1">user_info</span>(user_id, cb_user_info, {receiver <span class="pl-k">=</span> receiver, get_cmd <span class="pl-k">=</span> get_cmd})</div><div class='line js-file-line' id='LC1983'>			<span class="pl-k">elseif</span> <span class="pl-k">not</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1984'>				<span class="pl-k">local</span> cbres_extra <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC1985'>					channel <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg),</div><div class='line js-file-line' id='LC1986'>					get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>demote<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC1987'>				}</div><div class='line js-file-line' id='LC1988'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC1989'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>@<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1990'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] demoted @<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>username)</div><div class='line js-file-line' id='LC1991'>				<span class="pl-k">return</span> <span class="pl-c1">resolve_username</span>(username, callbackres, cbres_extra)</div><div class='line js-file-line' id='LC1992'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1993'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC1994'><br></div><div class='line js-file-line' id='LC1995'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>setname<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC1996'>			<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC1997'>			<span class="pl-k">local</span> set_name <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>_<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC1998'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] renamed SuperGroup to: <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>matches[<span class="pl-c1">2</span>])</div><div class='line js-file-line' id='LC1999'>			<span class="pl-c1">rename_channel</span>(receiver, set_name, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC2000'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2001'><br></div><div class='line js-file-line' id='LC2002'>		<span class="pl-k">if</span> msg.<span class="pl-smi">service</span> <span class="pl-k">and</span> msg.<span class="pl-smi">action</span>.<span class="pl-smi">type</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_rename<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2003'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] renamed SuperGroup to: <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">to</span>.<span class="pl-smi">title</span>)</div><div class='line js-file-line' id='LC2004'>			data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>set_name<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">title</span></div><div class='line js-file-line' id='LC2005'>			<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC2006'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2007'><br></div><div class='line js-file-line' id='LC2008'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>setabout<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2009'>			<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC2010'>			<span class="pl-k">local</span> about_text <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC2011'>			<span class="pl-k">local</span> data_cat <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>description<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2012'>			<span class="pl-k">local</span> target <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2013'>			data[<span class="pl-c1">tostring</span>(target)][data_cat] <span class="pl-k">=</span> about_text</div><div class='line js-file-line' id='LC2014'>			<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC2015'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup description to: <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>about_text)</div><div class='line js-file-line' id='LC2016'>			<span class="pl-c1">channel_set_about</span>(receiver, about_text, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC2017'>			<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Description has been set.<span class="pl-cce">\n\n</span>Select the chat again to see the changes.<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2018'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2019'><br></div><div class='line js-file-line' id='LC2020'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>setusername<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_admin1</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2021'>			<span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">ok_username_cb</span> (<span class="pl-smi">extra, success, result</span>)</div><div class='line js-file-line' id='LC2022'>				<span class="pl-k">local</span> receiver <span class="pl-k">=</span> extra.<span class="pl-smi">receiver</span></div><div class='line js-file-line' id='LC2023'>				<span class="pl-k">if</span> success <span class="pl-k">==</span> <span class="pl-c1">1</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2024'>					<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&quot;</span>SuperGroup username Set.<span class="pl-cce">\n\n</span>Select the chat again to see the changes.<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2025'>				<span class="pl-k">elseif</span> success <span class="pl-k">==</span> <span class="pl-c1">0</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2026'>					<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&quot;</span>Failed to set SuperGroup username.<span class="pl-cce">\n</span>Username may already be taken.<span class="pl-cce">\n\n</span>Note: Username can use a-z, 0-9 and underscores.<span class="pl-cce">\n</span>Minimum length is 5 characters.<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2027'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2028'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2029'>			<span class="pl-k">local</span> username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>@<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC2030'>			<span class="pl-c1">channel_set_username</span>(receiver, username, ok_username_cb, {receiver<span class="pl-k">=</span>receiver})</div><div class='line js-file-line' id='LC2031'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2032'><br></div><div class='line js-file-line' id='LC2033'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setrules<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2034'>			rules <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC2035'>			<span class="pl-k">local</span> target <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2036'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] has changed group rules to [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>matches[<span class="pl-c1">2</span>]<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>]<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2037'>			<span class="pl-k">return</span> <span class="pl-c1">set_rulesmod</span>(msg, data, target)</div><div class='line js-file-line' id='LC2038'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2039'><br></div><div class='line js-file-line' id='LC2040'>		<span class="pl-k">if</span> msg.<span class="pl-smi">media</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2041'>			<span class="pl-k">if</span> msg.<span class="pl-smi">media</span>.<span class="pl-smi">type</span> <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>photo<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>set_photo<span class="pl-pds">&#39;</span></span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>waiting<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2042'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set new SuperGroup photo<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2043'>				<span class="pl-c1">load_photo</span>(msg.<span class="pl-smi">id</span>, set_supergroup_photo, msg)</div><div class='line js-file-line' id='LC2044'>				<span class="pl-k">return</span></div><div class='line js-file-line' id='LC2045'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2046'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2047'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setphoto<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2048'>			data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>set_photo<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>waiting<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2049'>			<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC2050'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] started setting new SuperGroup photo<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2051'>			<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Please send the new group photo now<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2052'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2053'><br></div><div class='line js-file-line' id='LC2054'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>clean<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2055'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2056'>				<span class="pl-k">return</span></div><div class='line js-file-line' id='LC2057'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2058'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2059'>				<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Only owner can clean<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2060'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2061'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>modlist<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2062'>				<span class="pl-k">if</span> <span class="pl-c1">next</span>(data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>]) <span class="pl-k">==</span> <span class="pl-c1">nil</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2063'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>No moderator(s) in this SuperGroup.<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2064'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2065'>				<span class="pl-k">for</span> k,v <span class="pl-k">in</span> <span class="pl-c1">pairs</span>(data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>]) <span class="pl-k">do</span></div><div class='line js-file-line' id='LC2066'>					data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>moderators<span class="pl-pds">&#39;</span></span>][<span class="pl-c1">tostring</span>(k)] <span class="pl-k">=</span> <span class="pl-c1">nil</span></div><div class='line js-file-line' id='LC2067'>					<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC2068'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2069'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] cleaned modlist<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2070'>				<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Modlist has been cleaned<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2071'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2072'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>rules<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2073'>				<span class="pl-k">local</span> data_cat <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>rules<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2074'>				<span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][data_cat] <span class="pl-k">==</span> <span class="pl-c1">nil</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2075'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Rules have not been set<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2076'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2077'>				data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][data_cat] <span class="pl-k">=</span> <span class="pl-c1">nil</span></div><div class='line js-file-line' id='LC2078'>				<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC2079'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] cleaned rules<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2080'>				<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Rules have been cleaned<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2081'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2082'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>about<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2083'>				<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC2084'>				<span class="pl-k">local</span> about_text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span> <span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2085'>				<span class="pl-k">local</span> data_cat <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>description<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2086'>				<span class="pl-k">if</span> data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][data_cat] <span class="pl-k">==</span> <span class="pl-c1">nil</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2087'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>About is not set<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2088'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2089'>				data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][data_cat] <span class="pl-k">=</span> <span class="pl-c1">nil</span></div><div class='line js-file-line' id='LC2090'>				<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC2091'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] cleaned about<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2092'>				<span class="pl-c1">channel_set_about</span>(receiver, about_text, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC2093'>				<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>About has been cleaned<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2094'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2095'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>silentlist<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2096'>				chat_id <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2097'>				<span class="pl-k">local</span> hash <span class="pl-k">=</span>  <span class="pl-s"><span class="pl-pds">&#39;</span>mute_user:<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>chat_id</div><div class='line js-file-line' id='LC2098'>					redis:<span class="pl-c1">del</span>(hash)</div><div class='line js-file-line' id='LC2099'>				<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>silentlist Cleaned<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2100'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2101'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>username<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_admin1</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2102'>				<span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">ok_username_cb</span> (<span class="pl-smi">extra, success, result</span>)</div><div class='line js-file-line' id='LC2103'>					<span class="pl-k">local</span> receiver <span class="pl-k">=</span> extra.<span class="pl-smi">receiver</span></div><div class='line js-file-line' id='LC2104'>					<span class="pl-k">if</span> success <span class="pl-k">==</span> <span class="pl-c1">1</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2105'>						<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&quot;</span>SuperGroup username cleaned.<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2106'>					<span class="pl-k">elseif</span> success <span class="pl-k">==</span> <span class="pl-c1">0</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2107'>						<span class="pl-c1">send_large_msg</span>(receiver, <span class="pl-s"><span class="pl-pds">&quot;</span>Failed to clean SuperGroup username.<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2108'>					<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2109'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2110'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2111'>				<span class="pl-c1">channel_set_username</span>(receiver, username, ok_username_cb, {receiver<span class="pl-k">=</span>receiver})</div><div class='line js-file-line' id='LC2112'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2113'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2114'><br></div><div class='line js-file-line' id='LC2115'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>lock<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2116'>			<span class="pl-k">local</span> target <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2117'>			     <span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>all<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2118'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-k">local</span> safemode <span class="pl-k">=</span>{</div><div class='line js-file-line' id='LC2119'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">lock_group_links</span>(msg, data, target),</div><div class='line js-file-line' id='LC2120'>		<span class="pl-c1">lock_group_tag</span>(msg, data, target),</div><div class='line js-file-line' id='LC2121'>		<span class="pl-c1">lock_group_spam</span>(msg, data, target),</div><div class='line js-file-line' id='LC2122'>		<span class="pl-c1">lock_group_flood</span>(msg, data, target),</div><div class='line js-file-line' id='LC2123'>		<span class="pl-c1">lock_group_arabic</span>(msg, data, target),</div><div class='line js-file-line' id='LC2124'>		<span class="pl-c1">lock_group_membermod</span>(msg, data, target),</div><div class='line js-file-line' id='LC2125'>		<span class="pl-c1">lock_group_rtl</span>(msg, data, target),</div><div class='line js-file-line' id='LC2126'>		<span class="pl-c1">lock_group_tgservice</span>(msg, data, target),</div><div class='line js-file-line' id='LC2127'>		<span class="pl-c1">lock_group_sticker</span>(msg, data, target),</div><div class='line js-file-line' id='LC2128'>		<span class="pl-c1">lock_group_contacts</span>(msg, data, target),</div><div class='line js-file-line' id='LC2129'>		<span class="pl-c1">lock_group_english</span>(msg, data, target),</div><div class='line js-file-line' id='LC2130'>		<span class="pl-c1">lock_group_fwd</span>(msg, data, target),</div><div class='line js-file-line' id='LC2131'>		<span class="pl-c1">lock_group_reply</span>(msg, data, target),</div><div class='line js-file-line' id='LC2132'>		<span class="pl-c1">lock_group_join</span>(msg, data, target),</div><div class='line js-file-line' id='LC2133'>		<span class="pl-c1">lock_group_emoji</span>(msg, data, target),</div><div class='line js-file-line' id='LC2134'>		<span class="pl-c1">lock_group_username</span>(msg, data, target),</div><div class='line js-file-line' id='LC2135'>		<span class="pl-c1">lock_group_fosh</span>(msg, data, target),</div><div class='line js-file-line' id='LC2136'>		<span class="pl-c1">lock_group_media</span>(msg, data, target),</div><div class='line js-file-line' id='LC2137'>		<span class="pl-c1">lock_group_leave</span>(msg, data, target),</div><div class='line js-file-line' id='LC2138'>		<span class="pl-c1">lock_group_bots</span>(msg, data, target),</div><div class='line js-file-line' id='LC2139'>		<span class="pl-c1">lock_group_operator</span>(msg, data, target),</div><div class='line js-file-line' id='LC2140'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	}</div><div class='line js-file-line' id='LC2141'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-k">return</span> <span class="pl-c1">lock_group_all</span>(msg, data, target), safemode</div><div class='line js-file-line' id='LC2142'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2143'>			     <span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>etehad<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2144'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-k">local</span> etehad <span class="pl-k">=</span>{</div><div class='line js-file-line' id='LC2145'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">unlock_group_links</span>(msg, data, target),</div><div class='line js-file-line' id='LC2146'>		<span class="pl-c1">lock_group_tag</span>(msg, data, target),</div><div class='line js-file-line' id='LC2147'>		<span class="pl-c1">lock_group_spam</span>(msg, data, target),</div><div class='line js-file-line' id='LC2148'>		<span class="pl-c1">lock_group_flood</span>(msg, data, target),</div><div class='line js-file-line' id='LC2149'>		<span class="pl-c1">unlock_group_arabic</span>(msg, data, target),</div><div class='line js-file-line' id='LC2150'>		<span class="pl-c1">lock_group_membermod</span>(msg, data, target),</div><div class='line js-file-line' id='LC2151'>		<span class="pl-c1">unlock_group_rtl</span>(msg, data, target),</div><div class='line js-file-line' id='LC2152'>		<span class="pl-c1">lock_group_tgservice</span>(msg, data, target),</div><div class='line js-file-line' id='LC2153'>		<span class="pl-c1">lock_group_sticker</span>(msg, data, target),</div><div class='line js-file-line' id='LC2154'>		<span class="pl-c1">unlock_group_contacts</span>(msg, data, target),</div><div class='line js-file-line' id='LC2155'>		<span class="pl-c1">unlock_group_english</span>(msg, data, target),</div><div class='line js-file-line' id='LC2156'>		<span class="pl-c1">unlock_group_fwd</span>(msg, data, target),</div><div class='line js-file-line' id='LC2157'>		<span class="pl-c1">unlock_group_reply</span>(msg, data, target),</div><div class='line js-file-line' id='LC2158'>		<span class="pl-c1">lock_group_join</span>(msg, data, target),</div><div class='line js-file-line' id='LC2159'>		<span class="pl-c1">unlock_group_emoji</span>(msg, data, target),</div><div class='line js-file-line' id='LC2160'>		<span class="pl-c1">unlock_group_username</span>(msg, data, target),</div><div class='line js-file-line' id='LC2161'>		<span class="pl-c1">lock_group_fosh</span>(msg, data, target),</div><div class='line js-file-line' id='LC2162'>		<span class="pl-c1">unlock_group_media</span>(msg, data, target),</div><div class='line js-file-line' id='LC2163'>		<span class="pl-c1">lock_group_leave</span>(msg, data, target),</div><div class='line js-file-line' id='LC2164'>		<span class="pl-c1">lock_group_bots</span>(msg, data, target),</div><div class='line js-file-line' id='LC2165'>		<span class="pl-c1">unlock_group_operator</span>(msg, data, target),</div><div class='line js-file-line' id='LC2166'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	}</div><div class='line js-file-line' id='LC2167'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-k">return</span> <span class="pl-c1">lock_group_etehad</span>(msg, data, target), etehad</div><div class='line js-file-line' id='LC2168'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2169'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>links<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2170'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked link posting <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2171'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_links</span>(msg, data, target)</div><div class='line js-file-line' id='LC2172'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2173'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>join<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2174'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked join <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2175'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_join</span>(msg, data, target)</div><div class='line js-file-line' id='LC2176'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2177'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>tag<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2178'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked tag <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2179'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_tag</span>(msg, data, target)</div><div class='line js-file-line' id='LC2180'>			<span class="pl-k">end</span>			</div><div class='line js-file-line' id='LC2181'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>spam<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2182'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked spam <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2183'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_spam</span>(msg, data, target)</div><div class='line js-file-line' id='LC2184'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2185'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>flood<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2186'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked flood <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2187'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_flood</span>(msg, data, target)</div><div class='line js-file-line' id='LC2188'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2189'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>arabic<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2190'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked arabic <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2191'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_arabic</span>(msg, data, target)</div><div class='line js-file-line' id='LC2192'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2193'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>member<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2194'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked member <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2195'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_membermod</span>(msg, data, target)</div><div class='line js-file-line' id='LC2196'>			<span class="pl-k">end</span>		    </div><div class='line js-file-line' id='LC2197'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>]:<span class="pl-c1">lower</span>() <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>rtl<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2198'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked rtl chars. in names<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2199'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_rtl</span>(msg, data, target)</div><div class='line js-file-line' id='LC2200'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2201'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>tgservice<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2202'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked Tgservice Actions<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2203'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_tgservice</span>(msg, data, target)</div><div class='line js-file-line' id='LC2204'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2205'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>sticker<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2206'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked sticker posting<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2207'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_sticker</span>(msg, data, target)</div><div class='line js-file-line' id='LC2208'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2209'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>contacts<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2210'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked contact posting<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2211'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_contacts</span>(msg, data, target)</div><div class='line js-file-line' id='LC2212'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2213'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>strict<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2214'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked enabled strict settings<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2215'>				<span class="pl-k">return</span> <span class="pl-c1">enable_strict_rules</span>(msg, data, target)</div><div class='line js-file-line' id='LC2216'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2217'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>english<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2218'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked english<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2219'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_english</span>(msg, data, target)</div><div class='line js-file-line' id='LC2220'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2221'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>fwd<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2222'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked fwd<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2223'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_fwd</span>(msg, data, target)</div><div class='line js-file-line' id='LC2224'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2225'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>reply<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2226'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked reply<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2227'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_reply</span>(msg, data, target)</div><div class='line js-file-line' id='LC2228'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2229'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>emoji<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2230'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked emoji<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2231'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_emoji</span>(msg, data, target)</div><div class='line js-file-line' id='LC2232'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2233'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>fosh<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2234'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked fosh<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2235'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_fosh</span>(msg, data, target)</div><div class='line js-file-line' id='LC2236'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2237'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>media<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2238'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked media<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2239'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_media</span>(msg, data, target)</div><div class='line js-file-line' id='LC2240'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2241'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>username<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2242'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked username<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2243'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_username</span>(msg, data, target)</div><div class='line js-file-line' id='LC2244'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2245'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>leave<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2246'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked leave<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2247'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_leave</span>(msg, data, target)</div><div class='line js-file-line' id='LC2248'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2249'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>bots<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2250'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked bots<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2251'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_bots</span>(msg, data, target)</div><div class='line js-file-line' id='LC2252'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2253'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>operator<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2254'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked operator<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2255'>				<span class="pl-k">return</span> <span class="pl-c1">lock_group_operator</span>(msg, data, target)</div><div class='line js-file-line' id='LC2256'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2257'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2258'><br></div><div class='line js-file-line' id='LC2259'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>unlock<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2260'>			<span class="pl-k">local</span> target <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2261'>			     <span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>all<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2262'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-k">local</span> dsafemode <span class="pl-k">=</span>{</div><div class='line js-file-line' id='LC2263'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">unlock_group_links</span>(msg, data, target),</div><div class='line js-file-line' id='LC2264'>		<span class="pl-c1">unlock_group_tag</span>(msg, data, target),</div><div class='line js-file-line' id='LC2265'>		<span class="pl-c1">unlock_group_spam</span>(msg, data, target),</div><div class='line js-file-line' id='LC2266'>		<span class="pl-c1">unlock_group_flood</span>(msg, data, target),</div><div class='line js-file-line' id='LC2267'>		<span class="pl-c1">unlock_group_arabic</span>(msg, data, target),</div><div class='line js-file-line' id='LC2268'>		<span class="pl-c1">unlock_group_membermod</span>(msg, data, target),</div><div class='line js-file-line' id='LC2269'>		<span class="pl-c1">unlock_group_rtl</span>(msg, data, target),</div><div class='line js-file-line' id='LC2270'>		<span class="pl-c1">unlock_group_tgservice</span>(msg, data, target),</div><div class='line js-file-line' id='LC2271'>		<span class="pl-c1">unlock_group_sticker</span>(msg, data, target),</div><div class='line js-file-line' id='LC2272'>		<span class="pl-c1">unlock_group_contacts</span>(msg, data, target),</div><div class='line js-file-line' id='LC2273'>		<span class="pl-c1">unlock_group_english</span>(msg, data, target),</div><div class='line js-file-line' id='LC2274'>		<span class="pl-c1">unlock_group_fwd</span>(msg, data, target),</div><div class='line js-file-line' id='LC2275'>		<span class="pl-c1">unlock_group_reply</span>(msg, data, target),</div><div class='line js-file-line' id='LC2276'>		<span class="pl-c1">unlock_group_join</span>(msg, data, target),</div><div class='line js-file-line' id='LC2277'>		<span class="pl-c1">unlock_group_emoji</span>(msg, data, target),</div><div class='line js-file-line' id='LC2278'>		<span class="pl-c1">unlock_group_username</span>(msg, data, target),</div><div class='line js-file-line' id='LC2279'>		<span class="pl-c1">unlock_group_fosh</span>(msg, data, target),</div><div class='line js-file-line' id='LC2280'>		<span class="pl-c1">unlock_group_media</span>(msg, data, target),</div><div class='line js-file-line' id='LC2281'>		<span class="pl-c1">unlock_group_leave</span>(msg, data, target),</div><div class='line js-file-line' id='LC2282'>		<span class="pl-c1">unlock_group_bots</span>(msg, data, target),</div><div class='line js-file-line' id='LC2283'>		<span class="pl-c1">unlock_group_operator</span>(msg, data, target),</div><div class='line js-file-line' id='LC2284'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	}</div><div class='line js-file-line' id='LC2285'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-k">return</span> <span class="pl-c1">unlock_group_all</span>(msg, data, target), dsafemode</div><div class='line js-file-line' id='LC2286'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2287'>	  	<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>etehad<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2288'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-k">local</span> detehad <span class="pl-k">=</span>{</div><div class='line js-file-line' id='LC2289'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-c1">lock_group_links</span>(msg, data, target),</div><div class='line js-file-line' id='LC2290'>		<span class="pl-c1">unlock_group_tag</span>(msg, data, target),</div><div class='line js-file-line' id='LC2291'>		<span class="pl-c1">lock_group_spam</span>(msg, data, target),</div><div class='line js-file-line' id='LC2292'>		<span class="pl-c1">lock_group_flood</span>(msg, data, target),</div><div class='line js-file-line' id='LC2293'>		<span class="pl-c1">unlock_group_arabic</span>(msg, data, target),</div><div class='line js-file-line' id='LC2294'>		<span class="pl-c1">unlock_group_membermod</span>(msg, data, target),</div><div class='line js-file-line' id='LC2295'>		<span class="pl-c1">unlock_group_rtl</span>(msg, data, target),</div><div class='line js-file-line' id='LC2296'>		<span class="pl-c1">unlock_group_tgservice</span>(msg, data, target),</div><div class='line js-file-line' id='LC2297'>		<span class="pl-c1">unlock_group_sticker</span>(msg, data, target),</div><div class='line js-file-line' id='LC2298'>		<span class="pl-c1">unlock_group_contacts</span>(msg, data, target),</div><div class='line js-file-line' id='LC2299'>		<span class="pl-c1">unlock_group_english</span>(msg, data, target),</div><div class='line js-file-line' id='LC2300'>		<span class="pl-c1">unlock_group_fwd</span>(msg, data, target),</div><div class='line js-file-line' id='LC2301'>		<span class="pl-c1">unlock_group_reply</span>(msg, data, target),</div><div class='line js-file-line' id='LC2302'>		<span class="pl-c1">unlock_group_join</span>(msg, data, target),</div><div class='line js-file-line' id='LC2303'>		<span class="pl-c1">unlock_group_emoji</span>(msg, data, target),</div><div class='line js-file-line' id='LC2304'>		<span class="pl-c1">unlock_group_username</span>(msg, data, target),</div><div class='line js-file-line' id='LC2305'>		<span class="pl-c1">unlock_group_fosh</span>(msg, data, target),</div><div class='line js-file-line' id='LC2306'>		<span class="pl-c1">unlock_group_media</span>(msg, data, target),</div><div class='line js-file-line' id='LC2307'>		<span class="pl-c1">unlock_group_leave</span>(msg, data, target),</div><div class='line js-file-line' id='LC2308'>		<span class="pl-c1">unlock_group_bots</span>(msg, data, target),</div><div class='line js-file-line' id='LC2309'>		<span class="pl-c1">unlock_group_operator</span>(msg, data, target),</div><div class='line js-file-line' id='LC2310'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	}</div><div class='line js-file-line' id='LC2311'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;	<span class="pl-k">return</span> <span class="pl-c1">unlock_group_etehad</span>(msg, data, target), detehad</div><div class='line js-file-line' id='LC2312'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2313'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>links<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2314'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked link posting<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2315'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_links</span>(msg, data, target)</div><div class='line js-file-line' id='LC2316'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2317'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>join<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2318'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked join<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2319'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_join</span>(msg, data, target)</div><div class='line js-file-line' id='LC2320'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2321'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>tag<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2322'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked tag<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2323'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_tag</span>(msg, data, target)</div><div class='line js-file-line' id='LC2324'>			<span class="pl-k">end</span>			</div><div class='line js-file-line' id='LC2325'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>spam<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2326'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked spam<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2327'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_spam</span>(msg, data, target)</div><div class='line js-file-line' id='LC2328'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2329'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>flood<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2330'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked flood<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2331'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_flood</span>(msg, data, target)</div><div class='line js-file-line' id='LC2332'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2333'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>arabic<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2334'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked Arabic<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2335'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_arabic</span>(msg, data, target)</div><div class='line js-file-line' id='LC2336'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2337'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>member<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2338'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked member <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2339'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_membermod</span>(msg, data, target)</div><div class='line js-file-line' id='LC2340'>			<span class="pl-k">end</span>                   </div><div class='line js-file-line' id='LC2341'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>]:<span class="pl-c1">lower</span>() <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>rtl<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2342'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked RTL chars. in names<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2343'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_rtl</span>(msg, data, target)</div><div class='line js-file-line' id='LC2344'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2345'>				<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>tgservice<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2346'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked tgservice actions<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2347'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_tgservice</span>(msg, data, target)</div><div class='line js-file-line' id='LC2348'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2349'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>sticker<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2350'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked sticker posting<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2351'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_sticker</span>(msg, data, target)</div><div class='line js-file-line' id='LC2352'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2353'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>contacts<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2354'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked contact posting<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2355'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_contacts</span>(msg, data, target)</div><div class='line js-file-line' id='LC2356'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2357'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>strict<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2358'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked disabled strict settings<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2359'>				<span class="pl-k">return</span> <span class="pl-c1">disable_strict_rules</span>(msg, data, target)</div><div class='line js-file-line' id='LC2360'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2361'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>english<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2362'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked english<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2363'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_english</span>(msg, data, target)</div><div class='line js-file-line' id='LC2364'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2365'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>fwd<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2366'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked fwd<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2367'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_fwd</span>(msg, data, target)</div><div class='line js-file-line' id='LC2368'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2369'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>reply<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2370'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked reply<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2371'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_reply</span>(msg, data, target)</div><div class='line js-file-line' id='LC2372'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2373'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>emoji<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2374'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked disabled emoji<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2375'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_emoji</span>(msg, data, target)</div><div class='line js-file-line' id='LC2376'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2377'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>fosh<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2378'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked fosh<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2379'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_fosh</span>(msg, data, target)</div><div class='line js-file-line' id='LC2380'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2381'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>media<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2382'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] unlocked media<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2383'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_media</span>(msg, data, target)</div><div class='line js-file-line' id='LC2384'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2385'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>username<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2386'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked disabled username<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2387'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_username</span>(msg, data, target)</div><div class='line js-file-line' id='LC2388'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2389'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>leave<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2390'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked leave<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2391'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_leave</span>(msg, data, target)</div><div class='line js-file-line' id='LC2392'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2393'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>bots<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2394'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked bots<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2395'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_bots</span>(msg, data, target)</div><div class='line js-file-line' id='LC2396'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2397'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>operator<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2398'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] locked operator<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2399'>				<span class="pl-k">return</span> <span class="pl-c1">unlock_group_operator</span>(msg, data, target)</div><div class='line js-file-line' id='LC2400'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2401'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2402'><br></div><div class='line js-file-line' id='LC2403'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>setflood<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2404'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2405'>				<span class="pl-k">return</span></div><div class='line js-file-line' id='LC2406'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2407'>			<span class="pl-k">if</span> <span class="pl-c1">tonumber</span>(matches[<span class="pl-c1">2</span>]) <span class="pl-k">&lt;</span> <span class="pl-c1">1</span> <span class="pl-k">or</span> <span class="pl-c1">tonumber</span>(matches[<span class="pl-c1">2</span>]) <span class="pl-k">&gt;</span> <span class="pl-c1">200</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2408'>				<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Wrong number,range is [1-200]<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2409'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2410'>			<span class="pl-k">local</span> flood_max <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC2411'>			data[<span class="pl-c1">tostring</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>)][<span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span>][<span class="pl-s"><span class="pl-pds">&#39;</span>flood_msg_max<span class="pl-pds">&#39;</span></span>] <span class="pl-k">=</span> flood_max</div><div class='line js-file-line' id='LC2412'>			<span class="pl-c1">save_data</span>(_config.<span class="pl-smi">moderation</span>.<span class="pl-smi">data</span>, data)</div><div class='line js-file-line' id='LC2413'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set flood to [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>matches[<span class="pl-c1">2</span>]<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>]<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2414'>			<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Flood has been set to: <span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC2415'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2416'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>public<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2417'>			<span class="pl-k">local</span> target <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2418'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>yes<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2419'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set group to: public<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2420'>				<span class="pl-k">return</span> <span class="pl-c1">set_public_membermod</span>(msg, data, target)</div><div class='line js-file-line' id='LC2421'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2422'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>no<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2423'>				<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: not public<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2424'>				<span class="pl-k">return</span> <span class="pl-c1">unset_public_membermod</span>(msg, data, target)</div><div class='line js-file-line' id='LC2425'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2426'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2427'><br></div><div class='line js-file-line' id='LC2428'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>mute<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2429'>			<span class="pl-k">local</span> chat_id <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2430'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>audio<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2431'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Audio<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2432'>				<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2433'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2434'>					<span class="pl-c1">mute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2435'>					<span class="pl-k">return</span> msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been muted<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2436'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2437'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>SuperGroup mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already on<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2438'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2439'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2440'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>photo<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2441'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Photo<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2442'>				<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2443'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2444'>					<span class="pl-c1">mute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2445'>					<span class="pl-k">return</span> msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been muted<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2446'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2447'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>SuperGroup mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already on<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2448'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2449'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2450'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>video<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2451'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Video<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2452'>				<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2453'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2454'>					<span class="pl-c1">mute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2455'>					<span class="pl-k">return</span> msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been muted<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2456'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2457'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>SuperGroup mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already on<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2458'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2459'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2460'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>gifs<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2461'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Gifs<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2462'>				<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2463'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2464'>					<span class="pl-c1">mute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2465'>					<span class="pl-k">return</span> msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> have been muted<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2466'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2467'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>SuperGroup mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already on<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2468'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2469'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2470'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>documents<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2471'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Documents<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2472'>				<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2473'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2474'>					<span class="pl-c1">mute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2475'>					<span class="pl-k">return</span> msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> have been muted<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2476'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2477'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>SuperGroup mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already on<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2478'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2479'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2480'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>text<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2481'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Text<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2482'>				<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2483'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2484'>					<span class="pl-c1">mute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2485'>					<span class="pl-k">return</span> msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been muted<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2486'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2487'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already on<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2488'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2489'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2490'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>all<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2491'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>All<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2492'>				<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2493'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2494'>					<span class="pl-c1">mute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2495'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>  has been enabled<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2496'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2497'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already on<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2498'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2499'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2500'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2501'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>unmute<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2502'>			<span class="pl-k">local</span> chat_id <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2503'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>audio<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2504'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Audio<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2505'>				<span class="pl-k">if</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2506'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: unmute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2507'>					<span class="pl-c1">unmute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2508'>					<span class="pl-k">return</span> msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been unmuted<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2509'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2510'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already off<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2511'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2512'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2513'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>photo<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2514'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Photo<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2515'>				<span class="pl-k">if</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2516'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: unmute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2517'>					<span class="pl-c1">unmute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2518'>					<span class="pl-k">return</span> msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been unmuted<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2519'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2520'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already off<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2521'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2522'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2523'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>video<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2524'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Video<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2525'>				<span class="pl-k">if</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2526'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: unmute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2527'>					<span class="pl-c1">unmute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2528'>					<span class="pl-k">return</span> msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been unmuted<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2529'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2530'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already off<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2531'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2532'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2533'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>gifs<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2534'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Gifs<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2535'>				<span class="pl-k">if</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2536'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: unmute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2537'>					<span class="pl-c1">unmute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2538'>					<span class="pl-k">return</span> msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> have been unmuted<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2539'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2540'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already off<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2541'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2542'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2543'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>documents<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2544'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Documents<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2545'>				<span class="pl-k">if</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2546'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: unmute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2547'>					<span class="pl-c1">unmute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2548'>					<span class="pl-k">return</span> msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> have been unmuted<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2549'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2550'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already off<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2551'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2552'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2553'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>text<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2554'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>Text<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2555'>				<span class="pl-k">if</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2556'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: unmute message<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2557'>					<span class="pl-c1">unmute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2558'>					<span class="pl-k">return</span> msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been unmuted<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2559'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2560'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Mute text is already off<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2561'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2562'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2563'>			<span class="pl-k">if</span> matches[<span class="pl-c1">2</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>all<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2564'>			<span class="pl-k">local</span> msg_type <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>All<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2565'>				<span class="pl-k">if</span> <span class="pl-c1">is_muted</span>(chat_id, msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>: yes<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2566'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] set SuperGroup to: unmute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type)</div><div class='line js-file-line' id='LC2567'>					<span class="pl-c1">unmute</span>(chat_id, msg_type)</div><div class='line js-file-line' id='LC2568'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> has been disabled<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2569'>				<span class="pl-k">else</span></div><div class='line js-file-line' id='LC2570'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Mute <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg_type<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> is already disabled<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2571'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2572'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2573'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2574'><br></div><div class='line js-file-line' id='LC2575'><br></div><div class='line js-file-line' id='LC2576'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>silent<span class="pl-pds">&quot;</span></span> <span class="pl-k">or</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>unsilent<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2577'>			<span class="pl-k">local</span> chat_id <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2578'>			<span class="pl-k">local</span> hash <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>mute_user<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>chat_id</div><div class='line js-file-line' id='LC2579'>			<span class="pl-k">local</span> user_id <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span><span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2580'>			<span class="pl-k">if</span> <span class="pl-c1">type</span>(msg.<span class="pl-smi">reply_id</span>) <span class="pl-k">~=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>nil<span class="pl-pds">&quot;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2581'>				<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC2582'>				<span class="pl-k">local</span> get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>mute_user<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2583'>				muteuser <span class="pl-k">=</span> <span class="pl-c1">get_message</span>(msg.<span class="pl-smi">reply_id</span>, get_message_callback, {receiver <span class="pl-k">=</span> receiver, get_cmd <span class="pl-k">=</span> get_cmd, msg <span class="pl-k">=</span> msg})</div><div class='line js-file-line' id='LC2584'>			<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>silent<span class="pl-pds">&quot;</span></span> <span class="pl-k">or</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>unsilent<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2585'>				<span class="pl-k">local</span> user_id <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC2586'>				<span class="pl-k">if</span> <span class="pl-c1">is_muted_user</span>(chat_id, user_id) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2587'>					<span class="pl-c1">unmute_user</span>(chat_id, user_id)</div><div class='line js-file-line' id='LC2588'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] removed [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] from the muted users list<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2589'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>[<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] removed from the muted users list<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2590'>				<span class="pl-k">elseif</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2591'>					<span class="pl-c1">mute_user</span>(chat_id, user_id)</div><div class='line js-file-line' id='LC2592'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] added [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] to the muted users list<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2593'>					<span class="pl-k">return</span> <span class="pl-s"><span class="pl-pds">&quot;</span>[<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>user_id<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] added to the muted user list<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2594'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2595'>			<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>silent<span class="pl-pds">&quot;</span></span> <span class="pl-k">or</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>unsilent<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">string.match</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>^%d+$<span class="pl-pds">&#39;</span></span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2596'>				<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC2597'>				<span class="pl-k">local</span> get_cmd <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>mute_user<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2598'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> matches[<span class="pl-c1">2</span>]</div><div class='line js-file-line' id='LC2599'>				<span class="pl-k">local</span> username <span class="pl-k">=</span> <span class="pl-c1">string.gsub</span>(matches[<span class="pl-c1">2</span>], <span class="pl-s"><span class="pl-pds">&#39;</span>@<span class="pl-pds">&#39;</span></span>, <span class="pl-s"><span class="pl-pds">&#39;</span><span class="pl-pds">&#39;</span></span>)</div><div class='line js-file-line' id='LC2600'>				<span class="pl-c1">resolve_username</span>(username, callbackres, {receiver <span class="pl-k">=</span> receiver, get_cmd <span class="pl-k">=</span> get_cmd, msg<span class="pl-k">=</span>msg})</div><div class='line js-file-line' id='LC2601'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2602'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2603'><br></div><div class='line js-file-line' id='LC2604'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>muteslist<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2605'>			<span class="pl-k">local</span> chat_id <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2606'>			<span class="pl-k">if</span> <span class="pl-k">not</span> <span class="pl-c1">has_mutes</span>(chat_id) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2607'>				<span class="pl-c1">set_mutes</span>(chat_id)</div><div class='line js-file-line' id='LC2608'>				<span class="pl-k">return</span> <span class="pl-c1">mutes_list</span>(chat_id)</div><div class='line js-file-line' id='LC2609'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2610'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested SuperGroup muteslist<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2611'>			<span class="pl-k">return</span> <span class="pl-c1">mutes_list</span>(chat_id)</div><div class='line js-file-line' id='LC2612'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2613'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&quot;</span>silentlist<span class="pl-pds">&quot;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2614'>			<span class="pl-k">local</span> chat_id <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2615'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested SuperGroup mutelist<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2616'>			<span class="pl-k">return</span> <span class="pl-c1">muted_user_list</span>(chat_id)</div><div class='line js-file-line' id='LC2617'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2618'><br></div><div class='line js-file-line' id='LC2619'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>settings<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_momod</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2620'>			<span class="pl-k">local</span> target <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2621'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested SuperGroup settings <span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2622'>			<span class="pl-k">return</span> <span class="pl-c1">show_supergroup_settingsmod</span>(msg, target)</div><div class='line js-file-line' id='LC2623'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2624'><br></div><div class='line js-file-line' id='LC2625'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>rules<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2626'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] requested group rules<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2627'>			<span class="pl-k">return</span> <span class="pl-c1">get_rules</span>(msg, data)</div><div class='line js-file-line' id='LC2628'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2629'><br></div><div class='line js-file-line' id='LC2630'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>help<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2631'>			text <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>Message /superhelp to @antispam_shield in private for SuperGroup help<span class="pl-pds">&quot;</span></span></div><div class='line js-file-line' id='LC2632'>			<span class="pl-c1">reply_msg</span>(msg.<span class="pl-smi">id</span>, text, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC2633'>		<span class="pl-k">elseif</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>help<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_owner</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2634'>			<span class="pl-k">local</span> name_log <span class="pl-k">=</span> <span class="pl-c1">user_print_name</span>(msg.<span class="pl-smi">from</span>)</div><div class='line js-file-line' id='LC2635'>			<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] Used /superhelp<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2636'>			<span class="pl-k">return</span> <span class="pl-c1">super_help</span>()</div><div class='line js-file-line' id='LC2637'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2638'><br></div><div class='line js-file-line' id='LC2639'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>peer_id<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_admin1</span>(msg)<span class="pl-k">then</span></div><div class='line js-file-line' id='LC2640'>			text <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span></div><div class='line js-file-line' id='LC2641'>			<span class="pl-c1">reply_msg</span>(msg.<span class="pl-smi">id</span>, text, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC2642'>			<span class="pl-c1">post_large_msg</span>(receiver, text)</div><div class='line js-file-line' id='LC2643'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2644'><br></div><div class='line js-file-line' id='LC2645'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>msg.to.id<span class="pl-pds">&#39;</span></span> <span class="pl-k">and</span> <span class="pl-c1">is_admin1</span>(msg) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2646'>			text <span class="pl-k">=</span> msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2647'>			<span class="pl-c1">reply_msg</span>(msg.<span class="pl-smi">id</span>, text, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC2648'>			<span class="pl-c1">post_large_msg</span>(receiver, text)</div><div class='line js-file-line' id='LC2649'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2650'><br></div><div class='line js-file-line' id='LC2651'>		<span class="pl-c">--Admin Join Service Message</span></div><div class='line js-file-line' id='LC2652'>		<span class="pl-k">if</span> msg.<span class="pl-smi">service</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2653'>		<span class="pl-k">local</span> action <span class="pl-k">=</span> msg.<span class="pl-smi">action</span>.<span class="pl-smi">type</span></div><div class='line js-file-line' id='LC2654'>			<span class="pl-k">if</span> action <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_add_user_link<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2655'>				<span class="pl-k">if</span> <span class="pl-c1">is_owner2</span>(msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2656'>					<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC2657'>					<span class="pl-k">local</span> user <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2658'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> Admin [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] joined the SuperGroup via link<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2659'>					<span class="pl-c1">channel_set_admin</span>(receiver, user, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC2660'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2661'>				<span class="pl-k">if</span> <span class="pl-c1">is_support</span>(msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span>) <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_owner2</span>(msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2662'>					<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC2663'>					<span class="pl-k">local</span> user <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2664'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> Support member [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] joined the SuperGroup<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2665'>					<span class="pl-c1">channel_set_mod</span>(receiver, user, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC2666'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2667'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2668'>			<span class="pl-k">if</span> action <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>chat_add_user<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2669'>				<span class="pl-k">if</span> <span class="pl-c1">is_owner2</span>(msg.<span class="pl-smi">action</span>.<span class="pl-smi">user</span>.<span class="pl-smi">id</span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2670'>					<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC2671'>					<span class="pl-k">local</span> user <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">action</span>.<span class="pl-smi">user</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2672'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> Admin [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">action</span>.<span class="pl-smi">user</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] added to the SuperGroup by [ <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> ]<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2673'>					<span class="pl-c1">channel_set_admin</span>(receiver, user, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC2674'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2675'>				<span class="pl-k">if</span> <span class="pl-c1">is_support</span>(msg.<span class="pl-smi">action</span>.<span class="pl-smi">user</span>.<span class="pl-smi">id</span>) <span class="pl-k">and</span> <span class="pl-k">not</span> <span class="pl-c1">is_owner2</span>(msg.<span class="pl-smi">action</span>.<span class="pl-smi">user</span>.<span class="pl-smi">id</span>) <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2676'>					<span class="pl-k">local</span> receiver <span class="pl-k">=</span> <span class="pl-c1">get_receiver</span>(msg)</div><div class='line js-file-line' id='LC2677'>					<span class="pl-k">local</span> user <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&quot;</span>user#id<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">action</span>.<span class="pl-smi">user</span>.<span class="pl-smi">id</span></div><div class='line js-file-line' id='LC2678'>					<span class="pl-c1">savelog</span>(msg.<span class="pl-smi">to</span>.<span class="pl-smi">id</span>, name_log<span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> Support member [<span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">action</span>.<span class="pl-smi">user</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span>] added to the SuperGroup by [ <span class="pl-pds">&quot;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">from</span>.<span class="pl-smi">id</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&quot;</span> ]<span class="pl-pds">&quot;</span></span>)</div><div class='line js-file-line' id='LC2679'>					<span class="pl-c1">channel_set_mod</span>(receiver, user, ok_cb, <span class="pl-c1">false</span>)</div><div class='line js-file-line' id='LC2680'>				<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2681'>			<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2682'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2683'>		<span class="pl-k">if</span> matches[<span class="pl-c1">1</span>] <span class="pl-k">==</span> <span class="pl-s"><span class="pl-pds">&#39;</span>msg.to.peer_id<span class="pl-pds">&#39;</span></span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2684'>			<span class="pl-c1">post_large_msg</span>(receiver, msg.<span class="pl-smi">to</span>.<span class="pl-smi">peer_id</span>)</div><div class='line js-file-line' id='LC2685'>		<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2686'>	<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2687'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC2688'><br></div><div class='line js-file-line' id='LC2689'><span class="pl-k">local</span> <span class="pl-k">function</span> <span class="pl-en">pre_process</span>(<span class="pl-smi">msg</span>)</div><div class='line js-file-line' id='LC2690'>&nbsp;&nbsp;<span class="pl-k">if</span> <span class="pl-k">not</span> msg.<span class="pl-smi">text</span> <span class="pl-k">and</span> msg.<span class="pl-smi">media</span> <span class="pl-k">then</span></div><div class='line js-file-line' id='LC2691'>&nbsp;&nbsp;&nbsp;&nbsp;msg.<span class="pl-smi">text</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">&#39;</span>[<span class="pl-pds">&#39;</span></span><span class="pl-k">..</span>msg.<span class="pl-smi">media</span>.<span class="pl-smi">type</span><span class="pl-k">..</span><span class="pl-s"><span class="pl-pds">&#39;</span>]<span class="pl-pds">&#39;</span></span></div><div class='line js-file-line' id='LC2692'>&nbsp;&nbsp;<span class="pl-k">end</span></div><div class='line js-file-line' id='LC2693'>&nbsp;&nbsp;<span class="pl-k">return</span> msg</div><div class='line js-file-line' id='LC2694'><span class="pl-k">end</span></div><div class='line js-file-line' id='LC2695'><br></div><div class='line js-file-line' id='LC2696'><span class="pl-k">return</span> {</div><div class='line js-file-line' id='LC2697'>&nbsp;&nbsp;patterns <span class="pl-k">=</span> {</div><div class='line js-file-line' id='LC2698'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Aa]dd)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2699'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Rr]em)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2700'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Mm]ove) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2701'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Gg]pinfo)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2702'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Aa]dmins)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2703'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Oo]wner)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2704'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Mm]odlist)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2705'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Bb]ots)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2706'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ww]ho)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2707'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Kk]icked)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2708'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Bb]lock) (.*)<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2709'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Bb]lock)<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2710'>	    <span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Kk]ick) (.*)<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2711'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Kk]ick)<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2712'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Tt]osuper)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2713'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ii][Dd])$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2714'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ii][Dd]) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2715'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Kk]ickme)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2716'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Nn]ewlink)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2717'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]etlink)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2718'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ll]ink)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2719'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Rr]es) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2720'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]etadmin) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2721'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]etadmin)<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2722'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Dd]emoteadmin) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2723'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Dd]emoteadmin)<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2724'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]etowner) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2725'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]etowner)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2726'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Pp]romote) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2727'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Pp]romote)<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2728'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Dd]emote) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2729'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Dd]emote)<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2730'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]etname) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2731'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]etabout) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2732'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]etrules) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2733'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]etphoto)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2734'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]etusername) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2735'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Dd]el)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2736'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ll]ock) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2737'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Uu]nlock) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2738'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Mm]ute) ([^%s]+)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2739'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Uu]nmute) ([^%s]+)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2740'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]ilent)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2741'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]ilent) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2742'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Uu]nsilent)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2743'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Uu]nsilent) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2744'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Pp]ublic) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2745'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]ettings)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2746'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Rr]ules)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2747'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]etflood) (%d+)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2748'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Cc]lean) (.*)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2749'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Hh]elp)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2750'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Mm]uteslist)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2751'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^[#!/]([Ss]ilentlist)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2752'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-s"><span class="pl-pds">&quot;</span>[#!/](mp) (.*)<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2753'>	<span class="pl-s"><span class="pl-pds">&quot;</span>[#!/](md) (.*)<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2754'>&nbsp;&nbsp;&nbsp;&nbsp;<span class="pl-s"><span class="pl-pds">&quot;</span>^(https://telegram.me/joinchat/%S+)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2755'>	<span class="pl-s"><span class="pl-pds">&quot;</span>msg.to.peer_id<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2756'>	<span class="pl-s"><span class="pl-pds">&quot;</span>%[(document)%]<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2757'>	<span class="pl-s"><span class="pl-pds">&quot;</span>%[(photo)%]<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2758'>	<span class="pl-s"><span class="pl-pds">&quot;</span>%[(video)%]<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2759'>	<span class="pl-s"><span class="pl-pds">&quot;</span>%[(audio)%]<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2760'>	<span class="pl-s"><span class="pl-pds">&quot;</span>%[(contact)%]<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2761'>	<span class="pl-s"><span class="pl-pds">&quot;</span>^!!tgservice (.+)$<span class="pl-pds">&quot;</span></span>,</div><div class='line js-file-line' id='LC2762'>&nbsp;&nbsp;},</div><div class='line js-file-line' id='LC2763'>&nbsp;&nbsp;run <span class="pl-k">=</span> run,</div><div class='line js-file-line' id='LC2764'>&nbsp;&nbsp;pre_process <span class="pl-k">=</span> pre_process</div><div class='line js-file-line' id='LC2765'>}</div><div class='line js-file-line' id='LC2766'><br></div></pre></div></div>
  </div>



  <footer class="clearfix">
    <div class="container">
      <a href="#"><svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewBox="0 0 16 16" width="32"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59 0.4 0.07 0.55-0.17 0.55-0.38 0-0.19-0.01-0.82-0.01-1.49-2.01 0.37-2.53-0.49-2.69-0.94-0.09-0.23-0.48-0.94-0.82-1.13-0.28-0.15-0.68-0.52-0.01-0.53 0.63-0.01 1.08 0.58 1.23 0.82 0.72 1.21 1.87 0.87 2.33 0.66 0.07-0.52 0.28-0.87 0.51-1.07-1.78-0.2-3.64-0.89-3.64-3.95 0-0.87 0.31-1.59 0.82-2.15-0.08-0.2-0.36-1.02 0.08-2.12 0 0 0.67-0.21 2.2 0.82 0.64-0.18 1.32-0.27 2-0.27 0.68 0 1.36 0.09 2 0.27 1.53-1.04 2.2-0.82 2.2-0.82 0.44 1.1 0.16 1.92 0.08 2.12 0.51 0.56 0.82 1.27 0.82 2.15 0 3.07-1.87 3.75-3.65 3.95 0.29 0.25 0.54 0.73 0.54 1.48 0 1.07-0.01 1.93-0.01 2.2 0 0.21 0.15 0.46 0.55 0.38C13.71 14.53 16 11.53 16 8 16 3.58 12.42 0 8 0z"></path></svg></a>

      <ul class="clearfix">
        <li>
          <!-- </textarea> --><!-- '"` --><form accept-charset="UTF-8" action="/site/mobile_preference" class="js-mobile-preference-form" data-form-nonce="b42e3d8c5f3f459c7d2baf8785e29ad8e6ba8a69" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="iC/6yLb96CAxipV7pQ27KPwTJI+b1FiSbWugwyFCPHHvRaS3LnvUQvT3nYs/wdVD8OaNGi+YDa+2C5195zvFsw==" /></div>
            <input type="hidden" name="mobile" value="false">
            <input type="hidden" name="anchor" class="js-mobile-preference-anchor-field">

            <button type="submit" class="switch-to-desktop" data-ga-click="Mobile, switch to desktop, switch button">
              Desktop version
            </button>
</form>        </li>

      </ul>
    </div>
  </footer>
  
  <script async="async" crossorigin="anonymous" integrity="sha256-TvG7xljgXOlg6zTX/s6MWRpDEnqCyioxnc1xJna2hs8=" src="https://assets-cdn.github.com/assets/mobile-4ef1bbc658e05ce960eb34d7fece8c591a43127a82ca2a319dcd712676b686cf.js"></script>
</body>
</html>

